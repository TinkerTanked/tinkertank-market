{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/alien/Development/tinkertank/tinkertank-market/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined;\n};\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log: ['query', 'error'],\n  });\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KAAK;QAAC;QAAS;KAAQ;AACzB;AAEF,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///Users/alien/Development/tinkertank/tinkertank-market/src/app/api/admin/analytics/student-counts/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { prisma } from '@/lib/prisma';\nimport { startOfDay, endOfDay, addDays, format } from 'date-fns';\n\nexport async function GET() {\n  try {\n    const now = new Date();\n    const studentCountData = [];\n\n    // Get data for the next 7 days\n    for (let i = 0; i < 7; i++) {\n      const date = addDays(now, i);\n      const startDate = startOfDay(date);\n      const endDate = endOfDay(date);\n\n      // Get bookings for this day\n      const bookings = await prisma.booking.findMany({\n        where: {\n          startDate: {\n            gte: startDate,\n            lte: endDate,\n          },\n          status: {\n            in: ['CONFIRMED', 'COMPLETED'],\n          },\n        },\n        include: {\n          location: true,\n        },\n      });\n\n      // Get total capacity (sum of all location capacities for simplicity)\n      const locations = await prisma.location.findMany({\n        where: {\n          isActive: true,\n        },\n      });\n\n      const totalCapacity = locations.reduce((sum, location) => sum + location.capacity, 0);\n\n      studentCountData.push({\n        date: format(date, 'yyyy-MM-dd'),\n        count: bookings.length,\n        capacity: totalCapacity,\n      });\n    }\n\n    return NextResponse.json(studentCountData);\n  } catch (error) {\n    console.error('Student count analytics API error:', error);\n    return NextResponse.json({ error: 'Failed to fetch student count data' }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AAAA;AAAA;AAAA;;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,MAAM,IAAI;QAChB,MAAM,mBAAmB,EAAE;QAE3B,+BAA+B;QAC/B,IAAK,IAAI,IAAI,GAAG,IAAI,GAAG,IAAK;YAC1B,MAAM,OAAO,IAAA,oJAAO,EAAC,KAAK;YAC1B,MAAM,YAAY,IAAA,0JAAU,EAAC;YAC7B,MAAM,UAAU,IAAA,sJAAQ,EAAC;YAEzB,4BAA4B;YAC5B,MAAM,WAAW,MAAM,gIAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;gBAC7C,OAAO;oBACL,WAAW;wBACT,KAAK;wBACL,KAAK;oBACP;oBACA,QAAQ;wBACN,IAAI;4BAAC;4BAAa;yBAAY;oBAChC;gBACF;gBACA,SAAS;oBACP,UAAU;gBACZ;YACF;YAEA,qEAAqE;YACrE,MAAM,YAAY,MAAM,gIAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC;gBAC/C,OAAO;oBACL,UAAU;gBACZ;YACF;YAEA,MAAM,gBAAgB,UAAU,MAAM,CAAC,CAAC,KAAK,WAAa,MAAM,SAAS,QAAQ,EAAE;YAEnF,iBAAiB,IAAI,CAAC;gBACpB,MAAM,IAAA,kKAAM,EAAC,MAAM;gBACnB,OAAO,SAAS,MAAM;gBACtB,UAAU;YACZ;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sCAAsC;QACpD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAqC,GAAG;YAAE,QAAQ;QAAI;IAC1F;AACF","debugId":null}}]
}