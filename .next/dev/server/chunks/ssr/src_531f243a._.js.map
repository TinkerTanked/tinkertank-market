{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/alien/Development/tinkertank/tinkertank-market/src/hooks/useCalendar.ts"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useCallback } from 'react'\nimport { CalendarEvent, AdminCalendarEvent, BookingEvent } from '@/types/booking'\nimport { format } from 'date-fns'\n\ninterface UseCalendarOptions {\n  view?: 'customer' | 'admin'\n  productType?: string\n  locationId?: string\n  autoRefresh?: boolean\n  refreshInterval?: number\n}\n\ninterface UseCalendarReturn {\n  events: CalendarEvent[] | AdminCalendarEvent[]\n  loading: boolean\n  error: string | null\n  refreshEvents: () => Promise<void>\n  updateEvent: (eventId: string, updates: Partial<BookingEvent>) => Promise<void>\n  createEvent: (eventData: Partial<BookingEvent>) => Promise<void>\n  deleteEvent: (eventId: string) => Promise<void>\n}\n\nexport function useCalendar(\n  startDate: Date,\n  endDate: Date,\n  options: UseCalendarOptions = {}\n): UseCalendarReturn {\n  const {\n    view = 'customer',\n    productType,\n    locationId,\n    autoRefresh = false,\n    refreshInterval = 30000, // 30 seconds\n  } = options\n\n  const [events, setEvents] = useState<CalendarEvent[] | AdminCalendarEvent[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  const fetchEvents = useCallback(async () => {\n    try {\n      setLoading(true)\n      setError(null)\n\n      const params = new URLSearchParams({\n        start: startDate.toISOString(),\n        end: endDate.toISOString(),\n        view,\n      })\n\n      if (productType) params.append('productType', productType)\n      if (locationId) params.append('locationId', locationId)\n\n      const response = await fetch(`/api/calendar/events?${params}`)\n      const data = await response.json()\n\n      if (!data.success) {\n        throw new Error(data.error || 'Failed to fetch events')\n      }\n\n      setEvents(data.events)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Unknown error occurred')\n      console.error('Error fetching calendar events:', err)\n    } finally {\n      setLoading(false)\n    }\n  }, [startDate, endDate, view, productType, locationId])\n\n  const refreshEvents = useCallback(async () => {\n    await fetchEvents()\n  }, [fetchEvents])\n\n  const updateEvent = useCallback(async (eventId: string, updates: Partial<BookingEvent>) => {\n    try {\n      const response = await fetch(`/api/calendar/events/${eventId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(updates),\n      })\n\n      const data = await response.json()\n\n      if (!data.success) {\n        throw new Error(data.error || 'Failed to update event')\n      }\n\n      // Update local state\n      setEvents(prevEvents => \n        prevEvents.map(event => \n          event.id === eventId \n            ? { ...event, ...data.event }\n            : event\n        )\n      )\n\n      return data.event\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to update event')\n      throw err\n    }\n  }, [])\n\n  const createEvent = useCallback(async (eventData: Partial<BookingEvent>) => {\n    try {\n      const response = await fetch('/api/calendar/events', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(eventData),\n      })\n\n      const data = await response.json()\n\n      if (!data.success) {\n        throw new Error(data.error || 'Failed to create event')\n      }\n\n      // Add to local state\n      setEvents(prevEvents => [...prevEvents, data.event])\n\n      return data.event\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to create event')\n      throw err\n    }\n  }, [])\n\n  const deleteEvent = useCallback(async (eventId: string) => {\n    try {\n      const response = await fetch(`/api/calendar/events/${eventId}`, {\n        method: 'DELETE',\n      })\n\n      const data = await response.json()\n\n      if (!data.success) {\n        throw new Error(data.error || 'Failed to delete event')\n      }\n\n      // Remove from local state\n      setEvents(prevEvents => \n        prevEvents.filter(event => event.id !== eventId)\n      )\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to delete event')\n      throw err\n    }\n  }, [])\n\n  // Initial fetch\n  useEffect(() => {\n    fetchEvents()\n  }, [fetchEvents])\n\n  // Auto-refresh setup\n  useEffect(() => {\n    if (!autoRefresh) return\n\n    const interval = setInterval(fetchEvents, refreshInterval)\n    return () => clearInterval(interval)\n  }, [autoRefresh, refreshInterval, fetchEvents])\n\n  return {\n    events,\n    loading,\n    error,\n    refreshEvents,\n    updateEvent,\n    createEvent,\n    deleteEvent,\n  }\n}\n\n// Hook for managing calendar date range\nexport function useCalendarDateRange(initialDate = new Date()) {\n  const [currentDate, setCurrentDate] = useState(initialDate)\n  const [view, setView] = useState<'month' | 'week' | 'day'>('month')\n\n  const getDateRange = useCallback(() => {\n    const start = new Date(currentDate)\n    const end = new Date(currentDate)\n\n    switch (view) {\n      case 'day':\n        end.setDate(start.getDate() + 1)\n        break\n      case 'week':\n        start.setDate(start.getDate() - start.getDay())\n        end.setDate(start.getDate() + 7)\n        break\n      case 'month':\n      default:\n        start.setDate(1)\n        end.setMonth(end.getMonth() + 1)\n        end.setDate(0)\n        break\n    }\n\n    return { start, end }\n  }, [currentDate, view])\n\n  const navigateDate = useCallback((direction: 'prev' | 'next') => {\n    setCurrentDate(prev => {\n      const newDate = new Date(prev)\n      switch (view) {\n        case 'day':\n          newDate.setDate(newDate.getDate() + (direction === 'next' ? 1 : -1))\n          break\n        case 'week':\n          newDate.setDate(newDate.getDate() + (direction === 'next' ? 7 : -7))\n          break\n        case 'month':\n        default:\n          newDate.setMonth(newDate.getMonth() + (direction === 'next' ? 1 : -1))\n          break\n      }\n      return newDate\n    })\n  }, [view])\n\n  const goToToday = useCallback(() => {\n    setCurrentDate(new Date())\n  }, [])\n\n  return {\n    currentDate,\n    view,\n    setView,\n    getDateRange,\n    navigateDate,\n    goToToday,\n    setCurrentDate,\n  }\n}\n\n// Hook for calendar filters\nexport function useCalendarFilters() {\n  const [filters, setFilters] = useState({\n    productType: '',\n    locationId: '',\n    status: '',\n    paymentStatus: '',\n  })\n\n  const updateFilter = useCallback((key: string, value: string) => {\n    setFilters(prev => ({ ...prev, [key]: value }))\n  }, [])\n\n  const clearFilters = useCallback(() => {\n    setFilters({\n      productType: '',\n      locationId: '',\n      status: '',\n      paymentStatus: '',\n    })\n  }, [])\n\n  return {\n    filters,\n    updateFilter,\n    clearFilters,\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 238, "column": 0}, "map": {"version":3,"sources":["file:///Users/alien/Development/tinkertank/tinkertank-market/src/types/booking.ts"],"sourcesContent":["import { z } from 'zod'\nimport { EventInput } from '@fullcalendar/core'\nimport { Student } from './student'\nimport { Product } from './product'\nimport { Location } from './location'\n\n// Booking status enum\nexport enum BookingStatus {\n  PENDING = 'PENDING',\n  CONFIRMED = 'CONFIRMED',\n  CANCELLED = 'CANCELLED',\n  COMPLETED = 'COMPLETED',\n  NO_SHOW = 'NO_SHOW'\n}\n\n// Payment status enum\nexport enum PaymentStatus {\n  PENDING = 'PENDING',\n  PAID = 'PAID',\n  PARTIALLY_PAID = 'PARTIALLY_PAID',\n  REFUNDED = 'REFUNDED',\n  FAILED = 'FAILED'\n}\n\n// Event/Booking interface\nexport interface BookingEvent {\n  id: string\n  productId: string\n  product?: Product\n  studentId: string\n  student?: Student\n  locationId: string\n  location?: Location\n  startDateTime: Date\n  endDateTime: Date\n  status: BookingStatus\n  paymentStatus: PaymentStatus\n  totalAmount: number\n  amountPaid: number\n  discountsApplied: string[]\n  specialRequests?: string\n  notes?: string\n  stripePaymentIntentId?: string\n  createdAt: Date\n  updatedAt: Date\n}\n\n// Recurring event template\nexport interface RecurringEventTemplate {\n  id: string\n  productId: string\n  locationId: string\n  startTime: string // HH:MM\n  endTime: string // HH:MM\n  daysOfWeek: number[] // 0 = Sunday, 1 = Monday, etc.\n  startDate: Date\n  endDate?: Date\n  maxOccurrences?: number\n  isActive: boolean\n}\n\n// FullCalendar integration types\nexport interface CalendarEvent extends EventInput {\n  id: string\n  title: string\n  start: Date\n  end: Date\n  backgroundColor?: string\n  borderColor?: string\n  extendedProps: {\n    bookingId?: string\n    productType: string\n    studentName?: string\n    location: string\n    status: BookingStatus\n    paymentStatus: PaymentStatus\n    capacity?: number\n    currentBookings?: number\n  }\n}\n\n// Admin calendar view type\nexport interface AdminCalendarEvent extends CalendarEvent {\n  extendedProps: CalendarEvent['extendedProps'] & {\n    product: Product\n    bookings: BookingEvent[]\n    availableSpots: number\n  }\n}\n\n// Zod schemas\nexport const BookingEventSchema = z.object({\n  id: z.string().min(1),\n  productId: z.string().min(1),\n  studentId: z.string().min(1),\n  locationId: z.string().min(1),\n  startDateTime: z.coerce.date(),\n  endDateTime: z.coerce.date(),\n  status: z.nativeEnum(BookingStatus),\n  paymentStatus: z.nativeEnum(PaymentStatus),\n  totalAmount: z.number().min(0),\n  amountPaid: z.number().min(0).default(0),\n  discountsApplied: z.array(z.string()).default([]),\n  specialRequests: z.string().optional(),\n  notes: z.string().optional(),\n  stripePaymentIntentId: z.string().optional(),\n  createdAt: z.coerce.date(),\n  updatedAt: z.coerce.date(),\n}).refine(\n  (data) => data.endDateTime > data.startDateTime,\n  { message: 'End time must be after start time', path: ['endDateTime'] }\n).refine(\n  (data) => data.amountPaid <= data.totalAmount,\n  { message: 'Amount paid cannot exceed total amount', path: ['amountPaid'] }\n)\n\nexport const RecurringEventTemplateSchema = z.object({\n  id: z.string().min(1),\n  productId: z.string().min(1),\n  locationId: z.string().min(1),\n  startTime: z.string().regex(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/, 'Invalid time format'),\n  endTime: z.string().regex(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/, 'Invalid time format'),\n  daysOfWeek: z.array(z.number().min(0).max(6)).min(1, 'At least one day must be selected'),\n  startDate: z.coerce.date(),\n  endDate: z.coerce.date().optional(),\n  maxOccurrences: z.number().min(1).optional(),\n  isActive: z.boolean().default(true),\n}).refine(\n  (data) => !data.endDate || data.endDate > data.startDate,\n  { message: 'End date must be after start date', path: ['endDate'] }\n)\n\nexport const CalendarEventSchema = z.object({\n  id: z.string(),\n  title: z.string(),\n  start: z.coerce.date(),\n  end: z.coerce.date(),\n  backgroundColor: z.string().optional(),\n  borderColor: z.string().optional(),\n  extendedProps: z.object({\n    bookingId: z.string().optional(),\n    productType: z.string(),\n    studentName: z.string().optional(),\n    location: z.string(),\n    status: z.nativeEnum(BookingStatus),\n    paymentStatus: z.nativeEnum(PaymentStatus),\n    capacity: z.number().optional(),\n    currentBookings: z.number().optional(),\n  }),\n})\n\n// Type guards and utilities\nexport const isBookingConfirmed = (booking: BookingEvent): boolean => {\n  return booking.status === BookingStatus.CONFIRMED\n}\n\nexport const isBookingPaid = (booking: BookingEvent): boolean => {\n  return booking.paymentStatus === PaymentStatus.PAID\n}\n\nexport const getBookingStatusColor = (status: BookingStatus): string => {\n  switch (status) {\n    case BookingStatus.CONFIRMED:\n      return '#10B981' // green\n    case BookingStatus.PENDING:\n      return '#F59E0B' // yellow\n    case BookingStatus.CANCELLED:\n      return '#EF4444' // red\n    case BookingStatus.COMPLETED:\n      return '#6366F1' // indigo\n    case BookingStatus.NO_SHOW:\n      return '#6B7280' // gray\n    default:\n      return '#6B7280'\n  }\n}\n\nexport const getPaymentStatusColor = (status: PaymentStatus): string => {\n  switch (status) {\n    case PaymentStatus.PAID:\n      return '#10B981' // green\n    case PaymentStatus.PARTIALLY_PAID:\n      return '#F59E0B' // yellow\n    case PaymentStatus.PENDING:\n      return '#F59E0B' // yellow\n    case PaymentStatus.REFUNDED:\n      return '#6366F1' // indigo\n    case PaymentStatus.FAILED:\n      return '#EF4444' // red\n    default:\n      return '#6B7280'\n  }\n}\n\n// Convert booking to calendar event\nexport const bookingToCalendarEvent = (\n  booking: BookingEvent,\n  product?: Product,\n  student?: Student,\n  location?: Location\n): CalendarEvent => {\n  return {\n    id: booking.id,\n    title: product?.name || 'Unknown Product',\n    start: booking.startDateTime,\n    end: booking.endDateTime,\n    backgroundColor: getBookingStatusColor(booking.status),\n    borderColor: getPaymentStatusColor(booking.paymentStatus),\n    extendedProps: {\n      bookingId: booking.id,\n      productType: product?.type || 'UNKNOWN',\n      studentName: student?.name,\n      location: location?.name || 'Unknown Location',\n      status: booking.status,\n      paymentStatus: booking.paymentStatus,\n      capacity: product?.capacity,\n      currentBookings: 1, // This would be calculated based on other bookings for the same slot\n    },\n  }\n}\n\n// Check if booking can be cancelled\nexport const canCancelBooking = (booking: BookingEvent, hoursBeforeStart = 24): boolean => {\n  if (booking.status === BookingStatus.CANCELLED || booking.status === BookingStatus.COMPLETED) {\n    return false\n  }\n\n  const hoursUntilStart = (booking.startDateTime.getTime() - Date.now()) / (1000 * 60 * 60)\n  return hoursUntilStart >= hoursBeforeStart\n}\n\nexport type BookingInput = z.infer<typeof BookingEventSchema>\nexport type RecurringEventInput = z.infer<typeof RecurringEventTemplateSchema>\nexport type CalendarEventInput = z.infer<typeof CalendarEventSchema>\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 422, "column": 0}, "map": {"version":3,"sources":["file:///Users/alien/Development/tinkertank/tinkertank-market/src/components/calendar/EventModal.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { Dialog } from '@headlessui/react'\nimport { XMarkIcon } from '@heroicons/react/24/outline'\nimport { \n  AdminCalendarEvent, \n  BookingEvent, \n  BookingStatus, \n  PaymentStatus,\n  getBookingStatusColor,\n  getPaymentStatusColor \n} from '@/types/booking'\nimport { format } from 'date-fns'\nimport { clsx } from 'clsx'\n\ninterface EventModalProps {\n  isOpen: boolean\n  onClose: () => void\n  event: AdminCalendarEvent\n  onUpdate?: (eventId: string, updates: Partial<BookingEvent>) => void\n  onDelete?: (eventId: string) => void\n}\n\nexport default function EventModal({\n  isOpen,\n  onClose,\n  event,\n  onUpdate,\n  onDelete\n}: EventModalProps) {\n  const [activeTab, setActiveTab] = useState<'overview' | 'students' | 'settings'>('overview')\n  const [isEditing, setIsEditing] = useState(false)\n\n  const { \n    product, \n    bookings = [], \n    availableSpots, \n    capacity, \n    currentBookings,\n    location,\n    status,\n    paymentStatus\n  } = event.extendedProps\n\n  const totalRevenue = bookings.reduce((sum, booking) => sum + booking.amountPaid, 0)\n  const totalPending = bookings.reduce((sum, booking) => \n    sum + (booking.totalAmount - booking.amountPaid), 0\n  )\n\n  const statusCounts = bookings.reduce((counts, booking) => {\n    counts[booking.status] = (counts[booking.status] || 0) + 1\n    return counts\n  }, {} as Record<BookingStatus, number>)\n\n  const paymentCounts = bookings.reduce((counts, booking) => {\n    counts[booking.paymentStatus] = (counts[booking.paymentStatus] || 0) + 1\n    return counts\n  }, {} as Record<PaymentStatus, number>)\n\n  const handleStatusChange = (bookingId: string, newStatus: BookingStatus) => {\n    if (onUpdate) {\n      onUpdate(bookingId, { status: newStatus })\n    }\n  }\n\n  const handlePaymentStatusChange = (bookingId: string, newStatus: PaymentStatus) => {\n    if (onUpdate) {\n      onUpdate(bookingId, { paymentStatus: newStatus })\n    }\n  }\n\n  const exportToICal = () => {\n    const startDate = event.start.toISOString().replace(/[:\\-]|\\.\\d\\d\\d/g, '')\n    const endDate = event.end.toISOString().replace(/[:\\-]|\\.\\d\\d\\d/g, '')\n    \n    const icalContent = [\n      'BEGIN:VCALENDAR',\n      'VERSION:2.0',\n      'PRODID:-//TinkerTank//Calendar//EN',\n      'BEGIN:VEVENT',\n      `UID:${event.id}@tinkertank.com.au`,\n      `DTSTART:${startDate}`,\n      `DTEND:${endDate}`,\n      `SUMMARY:${event.title}`,\n      `DESCRIPTION:${product?.description || ''}`,\n      `LOCATION:${location}`,\n      `STATUS:${status === BookingStatus.CONFIRMED ? 'CONFIRMED' : 'TENTATIVE'}`,\n      'END:VEVENT',\n      'END:VCALENDAR'\n    ].join('\\n')\n\n    const blob = new Blob([icalContent], { type: 'text/calendar;charset=utf-8' })\n    const link = document.createElement('a')\n    link.href = URL.createObjectURL(blob)\n    link.download = `tinkertank-${event.title.toLowerCase().replace(/\\s+/g, '-')}.ics`\n    link.click()\n  }\n\n  return (\n    <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n      <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n      \n      <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n        <Dialog.Panel className=\"w-full max-w-4xl bg-white rounded-lg shadow-lg max-h-[90vh] overflow-y-auto\">\n          <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n            <div>\n              <Dialog.Title className=\"text-xl font-semibold text-gray-900\">\n                {event.title}\n              </Dialog.Title>\n              <p className=\"text-sm text-gray-600 mt-1\">\n                {format(event.start, 'EEEE, MMMM d, yyyy â€¢ h:mm a')} - {format(event.end, 'h:mm a')}\n              </p>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n            >\n              <XMarkIcon className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          <div className=\"border-b border-gray-200\">\n            <nav className=\"flex space-x-8 px-6\">\n              {['overview', 'students', 'settings'].map((tab) => (\n                <button\n                  key={tab}\n                  onClick={() => setActiveTab(tab as typeof activeTab)}\n                  className={clsx(\n                    'py-4 px-1 border-b-2 font-medium text-sm capitalize transition-colors',\n                    activeTab === tab\n                      ? 'border-blue-500 text-blue-600'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                  )}\n                >\n                  {tab}\n                </button>\n              ))}\n            </nav>\n          </div>\n\n          <div className=\"p-6\">\n            {activeTab === 'overview' && (\n              <div className=\"space-y-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                  <div className=\"bg-blue-50 p-4 rounded-lg\">\n                    <div className=\"text-sm font-medium text-blue-900\">Capacity</div>\n                    <div className=\"text-2xl font-bold text-blue-600\">\n                      {currentBookings || 0} / {capacity || 0}\n                    </div>\n                    <div className=\"text-xs text-blue-700 mt-1\">\n                      {availableSpots} spots available\n                    </div>\n                  </div>\n\n                  <div className=\"bg-green-50 p-4 rounded-lg\">\n                    <div className=\"text-sm font-medium text-green-900\">Revenue</div>\n                    <div className=\"text-2xl font-bold text-green-600\">\n                      ${totalRevenue.toFixed(2)}\n                    </div>\n                    <div className=\"text-xs text-green-700 mt-1\">\n                      ${totalPending.toFixed(2)} pending\n                    </div>\n                  </div>\n\n                  <div className=\"bg-gray-50 p-4 rounded-lg\">\n                    <div className=\"text-sm font-medium text-gray-900\">Location</div>\n                    <div className=\"text-lg font-semibold text-gray-800\">{location}</div>\n                    <div className=\"text-xs text-gray-600 mt-1\">\n                      {product?.type || 'Unknown Type'}\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-3\">Booking Status</h3>\n                    <div className=\"space-y-2\">\n                      {Object.entries(statusCounts).map(([status, count]) => (\n                        <div key={status} className=\"flex items-center justify-between\">\n                          <div className=\"flex items-center\">\n                            <div \n                              className=\"w-3 h-3 rounded-full mr-2\"\n                              style={{ backgroundColor: getBookingStatusColor(status as BookingStatus) }}\n                            />\n                            <span className=\"text-sm capitalize\">{status.toLowerCase().replace('_', ' ')}</span>\n                          </div>\n                          <span className=\"text-sm font-medium\">{count}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n\n                  <div>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-3\">Payment Status</h3>\n                    <div className=\"space-y-2\">\n                      {Object.entries(paymentCounts).map(([paymentStatus, count]) => (\n                        <div key={paymentStatus} className=\"flex items-center justify-between\">\n                          <div className=\"flex items-center\">\n                            <div \n                              className=\"w-3 h-3 rounded-full mr-2\"\n                              style={{ backgroundColor: getPaymentStatusColor(paymentStatus as PaymentStatus) }}\n                            />\n                            <span className=\"text-sm capitalize\">{paymentStatus.toLowerCase().replace('_', ' ')}</span>\n                          </div>\n                          <span className=\"text-sm font-medium\">{count}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {activeTab === 'students' && (\n              <div>\n                <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n                  Enrolled Students ({bookings.length})\n                </h3>\n                <div className=\"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg\">\n                  <table className=\"min-w-full divide-y divide-gray-300\">\n                    <thead className=\"bg-gray-50\">\n                      <tr>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wide\">\n                          Student\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wide\">\n                          Status\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wide\">\n                          Payment\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wide\">\n                          Amount\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wide\">\n                          Actions\n                        </th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\n                      {bookings.map((booking) => (\n                        <tr key={booking.id}>\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\n                            <div className=\"text-sm font-medium text-gray-900\">\n                              {booking.student?.name || 'Unknown Student'}\n                            </div>\n                            {booking.specialRequests && (\n                              <div className=\"text-xs text-gray-500 mt-1\">\n                                Special requests: {booking.specialRequests}\n                              </div>\n                            )}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\n                            <select\n                              value={booking.status}\n                              onChange={(e) => handleStatusChange(booking.id, e.target.value as BookingStatus)}\n                              className=\"text-xs px-2 py-1 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                            >\n                              {Object.values(BookingStatus).map((status) => (\n                                <option key={status} value={status}>\n                                  {status.toLowerCase().replace('_', ' ')}\n                                </option>\n                              ))}\n                            </select>\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\n                            <select\n                              value={booking.paymentStatus}\n                              onChange={(e) => handlePaymentStatusChange(booking.id, e.target.value as PaymentStatus)}\n                              className=\"text-xs px-2 py-1 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                            >\n                              {Object.values(PaymentStatus).map((status) => (\n                                <option key={status} value={status}>\n                                  {status.toLowerCase().replace('_', ' ')}\n                                </option>\n                              ))}\n                            </select>\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                            ${booking.amountPaid.toFixed(2)} / ${booking.totalAmount.toFixed(2)}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                            <button className=\"text-blue-600 hover:text-blue-900 mr-3\">\n                              View\n                            </button>\n                            <button className=\"text-red-600 hover:text-red-900\">\n                              Remove\n                            </button>\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            )}\n\n            {activeTab === 'settings' && (\n              <div className=\"space-y-6\">\n                <div>\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Event Settings</h3>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Event Title\n                      </label>\n                      <input\n                        type=\"text\"\n                        value={event.title}\n                        disabled={!isEditing}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Capacity\n                      </label>\n                      <input\n                        type=\"number\"\n                        value={capacity || ''}\n                        disabled={!isEditing}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50\"\n                      />\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"flex items-center justify-between pt-6 border-t border-gray-200\">\n                  <div className=\"flex space-x-3\">\n                    <button\n                      onClick={() => setIsEditing(!isEditing)}\n                      className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\"\n                    >\n                      {isEditing ? 'Save Changes' : 'Edit Event'}\n                    </button>\n                    <button\n                      onClick={exportToICal}\n                      className=\"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2\"\n                    >\n                      Export iCal\n                    </button>\n                  </div>\n                  \n                  {onDelete && (\n                    <button\n                      onClick={() => {\n                        if (confirm('Are you sure you want to delete this event? This action cannot be undone.')) {\n                          onDelete(event.id)\n                          onClose()\n                        }\n                      }}\n                      className=\"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2\"\n                    >\n                      Delete Event\n                    </button>\n                  )}\n                </div>\n              </div>\n            )}\n          </div>\n        </Dialog.Panel>\n      </div>\n    </Dialog>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAQA;AACA;AAdA;;;;;;;;AAwBe,SAAS,WAAW,EACjC,MAAM,EACN,OAAO,EACP,KAAK,EACL,QAAQ,EACR,QAAQ,EACQ;IAChB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAuC;IACjF,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,MAAM,EACJ,OAAO,EACP,WAAW,EAAE,EACb,cAAc,EACd,QAAQ,EACR,eAAe,EACf,QAAQ,EACR,MAAM,EACN,aAAa,EACd,GAAG,MAAM,aAAa;IAEvB,MAAM,eAAe,SAAS,MAAM,CAAC,CAAC,KAAK,UAAY,MAAM,QAAQ,UAAU,EAAE;IACjF,MAAM,eAAe,SAAS,MAAM,CAAC,CAAC,KAAK,UACzC,MAAM,CAAC,QAAQ,WAAW,GAAG,QAAQ,UAAU,GAAG;IAGpD,MAAM,eAAe,SAAS,MAAM,CAAC,CAAC,QAAQ;QAC5C,MAAM,CAAC,QAAQ,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,MAAM,CAAC,IAAI,CAAC,IAAI;QACzD,OAAO;IACT,GAAG,CAAC;IAEJ,MAAM,gBAAgB,SAAS,MAAM,CAAC,CAAC,QAAQ;QAC7C,MAAM,CAAC,QAAQ,aAAa,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,aAAa,CAAC,IAAI,CAAC,IAAI;QACvE,OAAO;IACT,GAAG,CAAC;IAEJ,MAAM,qBAAqB,CAAC,WAAmB;QAC7C,IAAI,UAAU;YACZ,SAAS,WAAW;gBAAE,QAAQ;YAAU;QAC1C;IACF;IAEA,MAAM,4BAA4B,CAAC,WAAmB;QACpD,IAAI,UAAU;YACZ,SAAS,WAAW;gBAAE,eAAe;YAAU;QACjD;IACF;IAEA,MAAM,eAAe;QACnB,MAAM,YAAY,MAAM,KAAK,CAAC,WAAW,GAAG,OAAO,CAAC,mBAAmB;QACvE,MAAM,UAAU,MAAM,GAAG,CAAC,WAAW,GAAG,OAAO,CAAC,mBAAmB;QAEnE,MAAM,cAAc;YAClB;YACA;YACA;YACA;YACA,CAAC,IAAI,EAAE,MAAM,EAAE,CAAC,kBAAkB,CAAC;YACnC,CAAC,QAAQ,EAAE,WAAW;YACtB,CAAC,MAAM,EAAE,SAAS;YAClB,CAAC,QAAQ,EAAE,MAAM,KAAK,EAAE;YACxB,CAAC,YAAY,EAAE,SAAS,eAAe,IAAI;YAC3C,CAAC,SAAS,EAAE,UAAU;YACtB,CAAC,OAAO,EAAE,WAAW,wIAAa,CAAC,SAAS,GAAG,cAAc,aAAa;YAC1E;YACA;SACD,CAAC,IAAI,CAAC;QAEP,MAAM,OAAO,IAAI,KAAK;YAAC;SAAY,EAAE;YAAE,MAAM;QAA8B;QAC3E,MAAM,OAAO,SAAS,aAAa,CAAC;QACpC,KAAK,IAAI,GAAG,IAAI,eAAe,CAAC;QAChC,KAAK,QAAQ,GAAG,CAAC,WAAW,EAAE,MAAM,KAAK,CAAC,WAAW,GAAG,OAAO,CAAC,QAAQ,KAAK,IAAI,CAAC;QAClF,KAAK,KAAK;IACZ;IAEA,qBACE,8OAAC,yLAAM;QAAC,MAAM;QAAQ,SAAS;QAAS,WAAU;;0BAChD,8OAAC;gBAAI,WAAU;gBAA4B,eAAY;;;;;;0BAEvD,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,yLAAM,CAAC,KAAK;oBAAC,WAAU;;sCACtB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;;sDACC,8OAAC,yLAAM,CAAC,KAAK;4CAAC,WAAU;sDACrB,MAAM,KAAK;;;;;;sDAEd,8OAAC;4CAAE,WAAU;;gDACV,IAAA,gKAAM,EAAC,MAAM,KAAK,EAAE;gDAA+B;gDAAI,IAAA,gKAAM,EAAC,MAAM,GAAG,EAAE;;;;;;;;;;;;;8CAG9E,8OAAC;oCACC,SAAS;oCACT,WAAU;8CAEV,cAAA,8OAAC,8NAAS;wCAAC,WAAU;;;;;;;;;;;;;;;;;sCAIzB,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAI,WAAU;0CACZ;oCAAC;oCAAY;oCAAY;iCAAW,CAAC,GAAG,CAAC,CAAC,oBACzC,8OAAC;wCAEC,SAAS,IAAM,aAAa;wCAC5B,WAAW,IAAA,6IAAI,EACb,yEACA,cAAc,MACV,kCACA;kDAGL;uCATI;;;;;;;;;;;;;;;sCAeb,8OAAC;4BAAI,WAAU;;gCACZ,cAAc,4BACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAI,WAAU;sEAAoC;;;;;;sEACnD,8OAAC;4DAAI,WAAU;;gEACZ,mBAAmB;gEAAE;gEAAI,YAAY;;;;;;;sEAExC,8OAAC;4DAAI,WAAU;;gEACZ;gEAAe;;;;;;;;;;;;;8DAIpB,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAI,WAAU;sEAAqC;;;;;;sEACpD,8OAAC;4DAAI,WAAU;;gEAAoC;gEAC/C,aAAa,OAAO,CAAC;;;;;;;sEAEzB,8OAAC;4DAAI,WAAU;;gEAA8B;gEACzC,aAAa,OAAO,CAAC;gEAAG;;;;;;;;;;;;;8DAI9B,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAI,WAAU;sEAAoC;;;;;;sEACnD,8OAAC;4DAAI,WAAU;sEAAuC;;;;;;sEACtD,8OAAC;4DAAI,WAAU;sEACZ,SAAS,QAAQ;;;;;;;;;;;;;;;;;;sDAKxB,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;;sEACC,8OAAC;4DAAG,WAAU;sEAAyC;;;;;;sEACvD,8OAAC;4DAAI,WAAU;sEACZ,OAAO,OAAO,CAAC,cAAc,GAAG,CAAC,CAAC,CAAC,QAAQ,MAAM,iBAChD,8OAAC;oEAAiB,WAAU;;sFAC1B,8OAAC;4EAAI,WAAU;;8FACb,8OAAC;oFACC,WAAU;oFACV,OAAO;wFAAE,iBAAiB,IAAA,gJAAqB,EAAC;oFAAyB;;;;;;8FAE3E,8OAAC;oFAAK,WAAU;8FAAsB,OAAO,WAAW,GAAG,OAAO,CAAC,KAAK;;;;;;;;;;;;sFAE1E,8OAAC;4EAAK,WAAU;sFAAuB;;;;;;;mEAR/B;;;;;;;;;;;;;;;;8DAchB,8OAAC;;sEACC,8OAAC;4DAAG,WAAU;sEAAyC;;;;;;sEACvD,8OAAC;4DAAI,WAAU;sEACZ,OAAO,OAAO,CAAC,eAAe,GAAG,CAAC,CAAC,CAAC,eAAe,MAAM,iBACxD,8OAAC;oEAAwB,WAAU;;sFACjC,8OAAC;4EAAI,WAAU;;8FACb,8OAAC;oFACC,WAAU;oFACV,OAAO;wFAAE,iBAAiB,IAAA,gJAAqB,EAAC;oFAAgC;;;;;;8FAElF,8OAAC;oFAAK,WAAU;8FAAsB,cAAc,WAAW,GAAG,OAAO,CAAC,KAAK;;;;;;;;;;;;sFAEjF,8OAAC;4EAAK,WAAU;sFAAuB;;;;;;;mEAR/B;;;;;;;;;;;;;;;;;;;;;;;;;;;;gCAiBrB,cAAc,4BACb,8OAAC;;sDACC,8OAAC;4CAAG,WAAU;;gDAAyC;gDACjC,SAAS,MAAM;gDAAC;;;;;;;sDAEtC,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC;gDAAM,WAAU;;kEACf,8OAAC;wDAAM,WAAU;kEACf,cAAA,8OAAC;;8EACC,8OAAC;oEAAG,WAAU;8EAAgF;;;;;;8EAG9F,8OAAC;oEAAG,WAAU;8EAAgF;;;;;;8EAG9F,8OAAC;oEAAG,WAAU;8EAAgF;;;;;;8EAG9F,8OAAC;oEAAG,WAAU;8EAAgF;;;;;;8EAG9F,8OAAC;oEAAG,WAAU;8EAAgF;;;;;;;;;;;;;;;;;kEAKlG,8OAAC;wDAAM,WAAU;kEACd,SAAS,GAAG,CAAC,CAAC,wBACb,8OAAC;;kFACC,8OAAC;wEAAG,WAAU;;0FACZ,8OAAC;gFAAI,WAAU;0FACZ,QAAQ,OAAO,EAAE,QAAQ;;;;;;4EAE3B,QAAQ,eAAe,kBACtB,8OAAC;gFAAI,WAAU;;oFAA6B;oFACvB,QAAQ,eAAe;;;;;;;;;;;;;kFAIhD,8OAAC;wEAAG,WAAU;kFACZ,cAAA,8OAAC;4EACC,OAAO,QAAQ,MAAM;4EACrB,UAAU,CAAC,IAAM,mBAAmB,QAAQ,EAAE,EAAE,EAAE,MAAM,CAAC,KAAK;4EAC9D,WAAU;sFAET,OAAO,MAAM,CAAC,wIAAa,EAAE,GAAG,CAAC,CAAC,uBACjC,8OAAC;oFAAoB,OAAO;8FACzB,OAAO,WAAW,GAAG,OAAO,CAAC,KAAK;mFADxB;;;;;;;;;;;;;;;kFAMnB,8OAAC;wEAAG,WAAU;kFACZ,cAAA,8OAAC;4EACC,OAAO,QAAQ,aAAa;4EAC5B,UAAU,CAAC,IAAM,0BAA0B,QAAQ,EAAE,EAAE,EAAE,MAAM,CAAC,KAAK;4EACrE,WAAU;sFAET,OAAO,MAAM,CAAC,wIAAa,EAAE,GAAG,CAAC,CAAC,uBACjC,8OAAC;oFAAoB,OAAO;8FACzB,OAAO,WAAW,GAAG,OAAO,CAAC,KAAK;mFADxB;;;;;;;;;;;;;;;kFAMnB,8OAAC;wEAAG,WAAU;;4EAAoD;4EAC9D,QAAQ,UAAU,CAAC,OAAO,CAAC;4EAAG;4EAAK,QAAQ,WAAW,CAAC,OAAO,CAAC;;;;;;;kFAEnE,8OAAC;wEAAG,WAAU;;0FACZ,8OAAC;gFAAO,WAAU;0FAAyC;;;;;;0FAG3D,8OAAC;gFAAO,WAAU;0FAAkC;;;;;;;;;;;;;+DA5C/C,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;gCAwD9B,cAAc,4BACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;;8DACC,8OAAC;oDAAG,WAAU;8DAAyC;;;;;;8DACvD,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;;8EACC,8OAAC;oEAAM,WAAU;8EAA+C;;;;;;8EAGhE,8OAAC;oEACC,MAAK;oEACL,OAAO,MAAM,KAAK;oEAClB,UAAU,CAAC;oEACX,WAAU;;;;;;;;;;;;sEAGd,8OAAC;;8EACC,8OAAC;oEAAM,WAAU;8EAA+C;;;;;;8EAGhE,8OAAC;oEACC,MAAK;oEACL,OAAO,YAAY;oEACnB,UAAU,CAAC;oEACX,WAAU;;;;;;;;;;;;;;;;;;;;;;;;sDAMlB,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DACC,SAAS,IAAM,aAAa,CAAC;4DAC7B,WAAU;sEAET,YAAY,iBAAiB;;;;;;sEAEhC,8OAAC;4DACC,SAAS;4DACT,WAAU;sEACX;;;;;;;;;;;;gDAKF,0BACC,8OAAC;oDACC,SAAS;wDACP,IAAI,QAAQ,8EAA8E;4DACxF,SAAS,MAAM,EAAE;4DACjB;wDACF;oDACF;oDACA,WAAU;8DACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYrB","debugId":null}},
    {"offset": {"line": 1255, "column": 0}, "map": {"version":3,"sources":["file:///Users/alien/Development/tinkertank/tinkertank-market/src/components/calendar/CalendarControls.tsx"],"sourcesContent":["'use client'\n\nimport { \n  CalendarIcon,\n  ClockIcon,\n  UserGroupIcon,\n  CurrencyDollarIcon,\n  ChartBarIcon\n} from '@heroicons/react/24/outline'\nimport { clsx } from 'clsx'\n\ninterface CalendarControlsProps {\n  currentView: 'dayGridMonth' | 'timeGridWeek' | 'timeGridDay'\n  onViewChange: (view: 'dayGridMonth' | 'timeGridWeek' | 'timeGridDay') => void\n  totalEvents: number\n  totalBookings: number\n  totalCapacity: number\n  revenue: number\n  className?: string\n}\n\nexport default function CalendarControls({\n  currentView,\n  onViewChange,\n  totalEvents,\n  totalBookings,\n  totalCapacity,\n  revenue,\n  className\n}: CalendarControlsProps) {\n  const utilizationRate = totalCapacity > 0 ? (totalBookings / totalCapacity) * 100 : 0\n\n  const views = [\n    { id: 'dayGridMonth' as const, label: 'Month', icon: CalendarIcon },\n    { id: 'timeGridWeek' as const, label: 'Week', icon: ChartBarIcon },\n    { id: 'timeGridDay' as const, label: 'Day', icon: ClockIcon }\n  ]\n\n  const stats = [\n    {\n      label: 'Total Events',\n      value: totalEvents.toString(),\n      icon: CalendarIcon,\n      color: 'text-blue-600 bg-blue-50'\n    },\n    {\n      label: 'Bookings',\n      value: `${totalBookings}/${totalCapacity}`,\n      icon: UserGroupIcon,\n      color: 'text-green-600 bg-green-50'\n    },\n    {\n      label: 'Utilization',\n      value: `${utilizationRate.toFixed(1)}%`,\n      icon: ChartBarIcon,\n      color: utilizationRate >= 80 ? 'text-green-600 bg-green-50' : \n             utilizationRate >= 60 ? 'text-yellow-600 bg-yellow-50' : \n             'text-red-600 bg-red-50'\n    },\n    {\n      label: 'Revenue',\n      value: `$${revenue.toLocaleString()}`,\n      icon: CurrencyDollarIcon,\n      color: 'text-purple-600 bg-purple-50'\n    }\n  ]\n\n  return (\n    <div className={clsx('border-b border-gray-200 bg-white', className)}>\n      <div className=\"px-6 py-4\">\n        <div className=\"flex items-center justify-between\">\n          {/* View Toggle */}\n          <div className=\"flex items-center space-x-1 bg-gray-100 rounded-lg p-1\">\n            {views.map((view) => {\n              const Icon = view.icon\n              return (\n                <button\n                  key={view.id}\n                  onClick={() => onViewChange(view.id)}\n                  className={clsx(\n                    'flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors',\n                    currentView === view.id\n                      ? 'bg-white text-blue-600 shadow-sm'\n                      : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n                  )}\n                >\n                  <Icon className=\"h-4 w-4\" />\n                  <span>{view.label}</span>\n                </button>\n              )\n            })}\n          </div>\n\n          {/* Quick Actions */}\n          <div className=\"flex items-center space-x-3\">\n            <button className=\"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\">\n              Export\n            </button>\n            <button className=\"px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\">\n              New Event\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Stats Bar */}\n      <div className=\"px-6 pb-4\">\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n          {stats.map((stat) => {\n            const Icon = stat.icon\n            return (\n              <div key={stat.label} className=\"flex items-center space-x-3\">\n                <div className={clsx('p-2 rounded-lg', stat.color)}>\n                  <Icon className=\"h-5 w-5\" />\n                </div>\n                <div>\n                  <div className=\"text-sm font-medium text-gray-900\">{stat.value}</div>\n                  <div className=\"text-xs text-gray-600\">{stat.label}</div>\n                </div>\n              </div>\n            )\n          })}\n        </div>\n      </div>\n\n      {/* Utilization Bar */}\n      <div className=\"px-6 pb-4\">\n        <div className=\"flex items-center justify-between text-sm text-gray-600 mb-2\">\n          <span>Daily Utilization</span>\n          <span>{utilizationRate.toFixed(1)}% ({totalBookings}/{totalCapacity})</span>\n        </div>\n        <div className=\"w-full bg-gray-200 rounded-full h-2\">\n          <div\n            className={clsx(\n              'h-2 rounded-full transition-all duration-300',\n              utilizationRate >= 90 ? 'bg-red-500' :\n              utilizationRate >= 80 ? 'bg-yellow-500' :\n              utilizationRate >= 60 ? 'bg-blue-500' :\n              'bg-green-500'\n            )}\n            style={{ width: `${Math.min(utilizationRate, 100)}%` }}\n          />\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1524, "column": 0}, "map": {"version":3,"sources":["file:///Users/alien/Development/tinkertank/tinkertank-market/src/components/calendar/AdminCalendar.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useCallback } from 'react'\nimport FullCalendar from '@fullcalendar/react'\nimport dayGridPlugin from '@fullcalendar/daygrid'\nimport timeGridPlugin from '@fullcalendar/timegrid'\nimport interactionPlugin from '@fullcalendar/interaction'\nimport { \n  AdminCalendarEvent, \n  BookingEvent, \n  BookingStatus, \n  PaymentStatus,\n  getBookingStatusColor \n} from '@/types/booking'\nimport { Product } from '@/types/product'\nimport { clsx } from 'clsx'\nimport EventModal from './EventModal'\nimport CalendarControls from './CalendarControls'\n\ninterface AdminCalendarProps {\n  events: AdminCalendarEvent[]\n  onEventUpdate?: (eventId: string, updates: Partial<BookingEvent>) => void\n  onEventCreate?: (event: Partial<BookingEvent>) => void\n  onEventDelete?: (eventId: string) => void\n  className?: string\n}\n\ntype CalendarView = 'dayGridMonth' | 'timeGridWeek' | 'timeGridDay'\n\nexport default function AdminCalendar({\n  events,\n  onEventUpdate,\n  onEventCreate,\n  onEventDelete,\n  className\n}: AdminCalendarProps) {\n  const [currentView, setCurrentView] = useState<CalendarView>('dayGridMonth')\n  const [selectedEvent, setSelectedEvent] = useState<AdminCalendarEvent | null>(null)\n  const [isModalOpen, setIsModalOpen] = useState(false)\n  const [selectedDate, setSelectedDate] = useState<Date | null>(null)\n  const [dailyStats, setDailyStats] = useState<Record<string, any>>({})\n\n  // Calculate daily statistics\n  useEffect(() => {\n    const stats: Record<string, any> = {}\n    \n    events.forEach(event => {\n      const startDate = typeof event.start === 'string' ? new Date(event.start) : event.start\n      const dateKey = startDate.toISOString().split('T')[0]\n      \n      if (!stats[dateKey]) {\n        stats[dateKey] = {\n          totalEvents: 0,\n          totalBookings: 0,\n          totalCapacity: 0,\n          revenue: 0,\n          statusCounts: {\n            [BookingStatus.CONFIRMED]: 0,\n            [BookingStatus.PENDING]: 0,\n            [BookingStatus.CANCELLED]: 0,\n            [BookingStatus.COMPLETED]: 0,\n            [BookingStatus.NO_SHOW]: 0,\n          }\n        }\n      }\n\n      const dayStats = stats[dateKey]\n      dayStats.totalEvents++\n      dayStats.totalBookings += event.extendedProps.currentBookings || 0\n      dayStats.totalCapacity += event.extendedProps.capacity || 0\n\n      // Calculate revenue and status counts from bookings\n      event.extendedProps.bookings?.forEach((booking: BookingEvent) => {\n        dayStats.revenue += booking.amountPaid\n        dayStats.statusCounts[booking.status]++\n      })\n    })\n\n    setDailyStats(stats)\n  }, [events])\n\n  const handleEventClick = useCallback((info: any) => {\n    const event = events.find(e => e.id === info.event.id)\n    if (event) {\n      setSelectedEvent(event)\n      setIsModalOpen(true)\n    }\n  }, [events])\n\n  const handleDateClick = useCallback((info: any) => {\n    setSelectedDate(new Date(info.date))\n    // Could open a \"Create Event\" modal here\n  }, [])\n\n  const handleEventDrop = useCallback((info: any) => {\n    if (onEventUpdate) {\n      const event = events.find(e => e.id === info.event.id)\n      if (event) {\n        onEventUpdate(info.event.id, {\n          startDateTime: info.event.start,\n          endDateTime: info.event.end,\n        })\n      }\n    }\n  }, [events, onEventUpdate])\n\n  const handleEventResize = useCallback((info: any) => {\n    if (onEventUpdate) {\n      onEventUpdate(info.event.id, {\n        endDateTime: info.event.end,\n      })\n    }\n  }, [onEventUpdate])\n\n  const eventContent = (eventInfo: any) => {\n    const event = events.find(e => e.id === eventInfo.event.id)\n    if (!event) return null\n\n    const { currentBookings, capacity, productType, status, paymentStatus } = event.extendedProps\n    const spotsLeft = capacity ? capacity - (currentBookings || 0) : 0\n    const utilizationPercent = capacity ? Math.round(((currentBookings || 0) / capacity) * 100) : 0\n\n    if (currentView === 'dayGridMonth') {\n      return (\n        <div className=\"p-1 text-xs\">\n          <div className=\"font-medium truncate\">{eventInfo.event.title}</div>\n          <div className=\"flex justify-between items-center mt-1\">\n            <span className=\"text-gray-600\">{currentBookings || 0}/{capacity || 0}</span>\n            <span className={clsx(\n              'px-1 py-0.5 rounded text-xs font-medium',\n              utilizationPercent >= 100 ? 'bg-red-100 text-red-800' :\n              utilizationPercent >= 80 ? 'bg-yellow-100 text-yellow-800' :\n              'bg-green-100 text-green-800'\n            )}>\n              {utilizationPercent}%\n            </span>\n          </div>\n        </div>\n      )\n    }\n\n    // Time grid views (week/day)\n    return (\n      <div className=\"p-2\">\n        <div className=\"font-medium text-sm\">{eventInfo.event.title}</div>\n        <div className=\"text-xs text-gray-600 mt-1\">\n          <div>Students: {currentBookings || 0}/{capacity || 0}</div>\n          <div>Available: {spotsLeft}</div>\n          <div className=\"flex items-center mt-1\">\n            <div \n              className={clsx(\n                'w-2 h-2 rounded-full mr-1',\n                status === BookingStatus.CONFIRMED ? 'bg-green-500' :\n                status === BookingStatus.PENDING ? 'bg-yellow-500' :\n                'bg-gray-500'\n              )}\n            />\n            <span className=\"capitalize\">{status?.toLowerCase()}</span>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  const dayCellContent = (arg: any) => {\n    const dateKey = arg.date.toISOString().split('T')[0]\n    const dayStats = dailyStats[dateKey]\n\n    if (!dayStats || currentView !== 'dayGridMonth') {\n      return null\n    }\n\n    return (\n      <div className=\"text-xs\">\n        <div className=\"font-medium\">{arg.dayNumberText}</div>\n        {dayStats.totalEvents > 0 && (\n          <div className=\"mt-1 space-y-1\">\n            <div className=\"bg-blue-100 text-blue-800 px-1 py-0.5 rounded\">\n              {dayStats.totalBookings}/{dayStats.totalCapacity}\n            </div>\n            <div className=\"bg-green-100 text-green-800 px-1 py-0.5 rounded\">\n              ${dayStats.revenue.toFixed(0)}\n            </div>\n          </div>\n        )}\n      </div>\n    )\n  }\n\n  const getViewTitle = () => {\n    switch (currentView) {\n      case 'dayGridMonth': return 'Month View'\n      case 'timeGridWeek': return 'Week View' \n      case 'timeGridDay': return 'Day View'\n      default: return 'Calendar View'\n    }\n  }\n\n  return (\n    <div className={clsx('bg-white rounded-lg shadow', className)}>\n      <CalendarControls\n        currentView={currentView}\n        onViewChange={setCurrentView}\n        totalEvents={events.length}\n        totalBookings={events.reduce((sum, e) => sum + (e.extendedProps.currentBookings || 0), 0)}\n        totalCapacity={events.reduce((sum, e) => sum + (e.extendedProps.capacity || 0), 0)}\n        revenue={events.reduce((sum, e) => \n          sum + (e.extendedProps.bookings?.reduce((bookingSum: number, b: BookingEvent) => \n            bookingSum + b.amountPaid, 0) || 0), 0\n        )}\n      />\n\n      <div className=\"p-4\">\n        <FullCalendar\n          plugins={[dayGridPlugin, timeGridPlugin, interactionPlugin]}\n          initialView={currentView}\n          headerToolbar={{\n            left: 'prev,next today',\n            center: 'title',\n            right: ''\n          }}\n          height=\"600px\"\n          events={events}\n          eventClick={handleEventClick}\n          dateClick={handleDateClick}\n          editable={true}\n          droppable={true}\n          eventDrop={handleEventDrop}\n          eventResize={handleEventResize}\n          eventContent={eventContent}\n          dayCellContent={currentView === 'dayGridMonth' ? dayCellContent : undefined}\n          timeZone=\"Australia/Sydney\"\n          slotMinTime=\"07:00:00\"\n          slotMaxTime=\"19:00:00\"\n          businessHours={{\n            daysOfWeek: [1, 2, 3, 4, 5], // Monday - Friday\n            startTime: '08:00',\n            endTime: '18:00',\n          }}\n          allDaySlot={false}\n          nowIndicator={true}\n          weekends={true}\n          firstDay={1}\n          eventOverlap={false}\n          selectOverlap={false}\n          eventResizableFromStart={true}\n          dayMaxEvents={currentView === 'dayGridMonth' ? 2 : false}\n          moreLinkClick=\"popover\"\n          locale=\"en-AU\"\n          buttonText={{\n            today: 'Today',\n            month: 'Month',\n            week: 'Week',\n            day: 'Day'\n          }}\n        />\n      </div>\n\n      {selectedEvent && (\n        <EventModal\n          isOpen={isModalOpen}\n          onClose={() => {\n            setIsModalOpen(false)\n            setSelectedEvent(null)\n          }}\n          event={selectedEvent}\n          onUpdate={onEventUpdate}\n          onDelete={onEventDelete}\n        />\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAQA;AACA;AACA;AAjBA;;;;;;;;;;;AA6Be,SAAS,cAAc,EACpC,MAAM,EACN,aAAa,EACb,aAAa,EACb,aAAa,EACb,SAAS,EACU;IACnB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAe;IAC7D,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAA4B;IAC9E,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAc;IAC9D,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAsB,CAAC;IAEnE,6BAA6B;IAC7B,IAAA,kNAAS,EAAC;QACR,MAAM,QAA6B,CAAC;QAEpC,OAAO,OAAO,CAAC,CAAA;YACb,MAAM,YAAY,OAAO,MAAM,KAAK,KAAK,WAAW,IAAI,KAAK,MAAM,KAAK,IAAI,MAAM,KAAK;YACvF,MAAM,UAAU,UAAU,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;YAErD,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;gBACnB,KAAK,CAAC,QAAQ,GAAG;oBACf,aAAa;oBACb,eAAe;oBACf,eAAe;oBACf,SAAS;oBACT,cAAc;wBACZ,CAAC,wIAAa,CAAC,SAAS,CAAC,EAAE;wBAC3B,CAAC,wIAAa,CAAC,OAAO,CAAC,EAAE;wBACzB,CAAC,wIAAa,CAAC,SAAS,CAAC,EAAE;wBAC3B,CAAC,wIAAa,CAAC,SAAS,CAAC,EAAE;wBAC3B,CAAC,wIAAa,CAAC,OAAO,CAAC,EAAE;oBAC3B;gBACF;YACF;YAEA,MAAM,WAAW,KAAK,CAAC,QAAQ;YAC/B,SAAS,WAAW;YACpB,SAAS,aAAa,IAAI,MAAM,aAAa,CAAC,eAAe,IAAI;YACjE,SAAS,aAAa,IAAI,MAAM,aAAa,CAAC,QAAQ,IAAI;YAE1D,oDAAoD;YACpD,MAAM,aAAa,CAAC,QAAQ,EAAE,QAAQ,CAAC;gBACrC,SAAS,OAAO,IAAI,QAAQ,UAAU;gBACtC,SAAS,YAAY,CAAC,QAAQ,MAAM,CAAC;YACvC;QACF;QAEA,cAAc;IAChB,GAAG;QAAC;KAAO;IAEX,MAAM,mBAAmB,IAAA,oNAAW,EAAC,CAAC;QACpC,MAAM,QAAQ,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK,KAAK,CAAC,EAAE;QACrD,IAAI,OAAO;YACT,iBAAiB;YACjB,eAAe;QACjB;IACF,GAAG;QAAC;KAAO;IAEX,MAAM,kBAAkB,IAAA,oNAAW,EAAC,CAAC;QACnC,gBAAgB,IAAI,KAAK,KAAK,IAAI;IAClC,yCAAyC;IAC3C,GAAG,EAAE;IAEL,MAAM,kBAAkB,IAAA,oNAAW,EAAC,CAAC;QACnC,IAAI,eAAe;YACjB,MAAM,QAAQ,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK,KAAK,CAAC,EAAE;YACrD,IAAI,OAAO;gBACT,cAAc,KAAK,KAAK,CAAC,EAAE,EAAE;oBAC3B,eAAe,KAAK,KAAK,CAAC,KAAK;oBAC/B,aAAa,KAAK,KAAK,CAAC,GAAG;gBAC7B;YACF;QACF;IACF,GAAG;QAAC;QAAQ;KAAc;IAE1B,MAAM,oBAAoB,IAAA,oNAAW,EAAC,CAAC;QACrC,IAAI,eAAe;YACjB,cAAc,KAAK,KAAK,CAAC,EAAE,EAAE;gBAC3B,aAAa,KAAK,KAAK,CAAC,GAAG;YAC7B;QACF;IACF,GAAG;QAAC;KAAc;IAElB,MAAM,eAAe,CAAC;QACpB,MAAM,QAAQ,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,UAAU,KAAK,CAAC,EAAE;QAC1D,IAAI,CAAC,OAAO,OAAO;QAEnB,MAAM,EAAE,eAAe,EAAE,QAAQ,EAAE,WAAW,EAAE,MAAM,EAAE,aAAa,EAAE,GAAG,MAAM,aAAa;QAC7F,MAAM,YAAY,WAAW,WAAW,CAAC,mBAAmB,CAAC,IAAI;QACjE,MAAM,qBAAqB,WAAW,KAAK,KAAK,CAAC,AAAC,CAAC,mBAAmB,CAAC,IAAI,WAAY,OAAO;QAE9F,IAAI,gBAAgB,gBAAgB;YAClC,qBACE,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCAAwB,UAAU,KAAK,CAAC,KAAK;;;;;;kCAC5D,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAK,WAAU;;oCAAiB,mBAAmB;oCAAE;oCAAE,YAAY;;;;;;;0CACpE,8OAAC;gCAAK,WAAW,IAAA,6IAAI,EACnB,2CACA,sBAAsB,MAAM,4BAC5B,sBAAsB,KAAK,kCAC3B;;oCAEC;oCAAmB;;;;;;;;;;;;;;;;;;;QAK9B;QAEA,6BAA6B;QAC7B,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;8BAAuB,UAAU,KAAK,CAAC,KAAK;;;;;;8BAC3D,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;;gCAAI;gCAAW,mBAAmB;gCAAE;gCAAE,YAAY;;;;;;;sCACnD,8OAAC;;gCAAI;gCAAY;;;;;;;sCACjB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,WAAW,IAAA,6IAAI,EACb,6BACA,WAAW,wIAAa,CAAC,SAAS,GAAG,iBACrC,WAAW,wIAAa,CAAC,OAAO,GAAG,kBACnC;;;;;;8CAGJ,8OAAC;oCAAK,WAAU;8CAAc,QAAQ;;;;;;;;;;;;;;;;;;;;;;;;IAKhD;IAEA,MAAM,iBAAiB,CAAC;QACtB,MAAM,UAAU,IAAI,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;QACpD,MAAM,WAAW,UAAU,CAAC,QAAQ;QAEpC,IAAI,CAAC,YAAY,gBAAgB,gBAAgB;YAC/C,OAAO;QACT;QAEA,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;8BAAe,IAAI,aAAa;;;;;;gBAC9C,SAAS,WAAW,GAAG,mBACtB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;gCACZ,SAAS,aAAa;gCAAC;gCAAE,SAAS,aAAa;;;;;;;sCAElD,8OAAC;4BAAI,WAAU;;gCAAkD;gCAC7D,SAAS,OAAO,CAAC,OAAO,CAAC;;;;;;;;;;;;;;;;;;;IAMvC;IAEA,MAAM,eAAe;QACnB,OAAQ;YACN,KAAK;gBAAgB,OAAO;YAC5B,KAAK;gBAAgB,OAAO;YAC5B,KAAK;gBAAe,OAAO;YAC3B;gBAAS,OAAO;QAClB;IACF;IAEA,qBACE,8OAAC;QAAI,WAAW,IAAA,6IAAI,EAAC,8BAA8B;;0BACjD,8OAAC,6JAAgB;gBACf,aAAa;gBACb,cAAc;gBACd,aAAa,OAAO,MAAM;gBAC1B,eAAe,OAAO,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,CAAC,EAAE,aAAa,CAAC,eAAe,IAAI,CAAC,GAAG;gBACvF,eAAe,OAAO,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,CAAC,EAAE,aAAa,CAAC,QAAQ,IAAI,CAAC,GAAG;gBAChF,SAAS,OAAO,MAAM,CAAC,CAAC,KAAK,IAC3B,MAAM,CAAC,EAAE,aAAa,CAAC,QAAQ,EAAE,OAAO,CAAC,YAAoB,IAC3D,aAAa,EAAE,UAAU,EAAE,MAAM,CAAC,GAAG;;;;;;0BAI3C,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,mKAAY;oBACX,SAAS;wBAAC,6JAAa;wBAAE,8JAAc;wBAAE,iKAAiB;qBAAC;oBAC3D,aAAa;oBACb,eAAe;wBACb,MAAM;wBACN,QAAQ;wBACR,OAAO;oBACT;oBACA,QAAO;oBACP,QAAQ;oBACR,YAAY;oBACZ,WAAW;oBACX,UAAU;oBACV,WAAW;oBACX,WAAW;oBACX,aAAa;oBACb,cAAc;oBACd,gBAAgB,gBAAgB,iBAAiB,iBAAiB;oBAClE,UAAS;oBACT,aAAY;oBACZ,aAAY;oBACZ,eAAe;wBACb,YAAY;4BAAC;4BAAG;4BAAG;4BAAG;4BAAG;yBAAE;wBAC3B,WAAW;wBACX,SAAS;oBACX;oBACA,YAAY;oBACZ,cAAc;oBACd,UAAU;oBACV,UAAU;oBACV,cAAc;oBACd,eAAe;oBACf,yBAAyB;oBACzB,cAAc,gBAAgB,iBAAiB,IAAI;oBACnD,eAAc;oBACd,QAAO;oBACP,YAAY;wBACV,OAAO;wBACP,OAAO;wBACP,MAAM;wBACN,KAAK;oBACP;;;;;;;;;;;YAIH,+BACC,8OAAC,uJAAU;gBACT,QAAQ;gBACR,SAAS;oBACP,eAAe;oBACf,iBAAiB;gBACnB;gBACA,OAAO;gBACP,UAAU;gBACV,UAAU;;;;;;;;;;;;AAKpB","debugId":null}},
    {"offset": {"line": 1929, "column": 0}, "map": {"version":3,"sources":["file:///Users/alien/Development/tinkertank/tinkertank-market/src/app/admin/calendar/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useMemo } from 'react'\nimport { useCalendar, useCalendarDateRange } from '@/hooks/useCalendar'\nimport AdminCalendar from '@/components/calendar/AdminCalendar'\nimport { AdminCalendarEvent, BookingEvent } from '@/types/booking'\nimport { \n  CalendarIcon, \n  ChartBarIcon, \n  UsersIcon,\n  CurrencyDollarIcon \n} from '@heroicons/react/24/outline'\n\nexport default function AdminCalendarPage() {\n  const [selectedFilters, setSelectedFilters] = useState({\n    productType: '',\n    locationId: '',\n    status: '',\n  })\n\n  const { currentDate, getDateRange } = useCalendarDateRange()\n  const dateRange = useMemo(() => getDateRange(), [getDateRange])\n  \n  const { \n    events, \n    loading, \n    error, \n    updateEvent, \n    createEvent, \n    deleteEvent,\n    refreshEvents \n  } = useCalendar(dateRange.start, dateRange.end, {\n    view: 'admin',\n    productType: selectedFilters.productType,\n    locationId: selectedFilters.locationId,\n    autoRefresh: false,\n  })\n\n  const adminEvents = events as AdminCalendarEvent[]\n\n  // Calculate summary statistics\n  const stats = {\n    totalEvents: adminEvents.length,\n    totalBookings: adminEvents.reduce((sum, event) => \n      sum + (event.extendedProps.currentBookings || 0), 0\n    ),\n    totalCapacity: adminEvents.reduce((sum, event) => \n      sum + (event.extendedProps.capacity || 0), 0\n    ),\n    revenue: adminEvents.reduce((sum, event) => \n      sum + (event.extendedProps.bookings?.reduce((bookingSum: number, booking: BookingEvent) => \n        bookingSum + booking.amountPaid, 0) || 0), 0\n    ),\n  }\n\n  const utilizationRate = stats.totalCapacity > 0 \n    ? (stats.totalBookings / stats.totalCapacity) * 100 \n    : 0\n\n  const handleEventUpdate = async (eventId: string, updates: Partial<BookingEvent>) => {\n    try {\n      await updateEvent(eventId, updates)\n      // Show success notification\n    } catch (error) {\n      console.error('Failed to update event:', error)\n      // Show error notification\n    }\n  }\n\n  const handleEventCreate = async (eventData: Partial<BookingEvent>) => {\n    try {\n      await createEvent(eventData)\n      // Show success notification\n    } catch (error) {\n      console.error('Failed to create event:', error)\n      // Show error notification\n    }\n  }\n\n  const handleEventDelete = async (eventId: string) => {\n    try {\n      await deleteEvent(eventId)\n      // Show success notification\n    } catch (error) {\n      console.error('Failed to delete event:', error)\n      // Show error notification\n    }\n  }\n\n  const filterOptions = {\n    productTypes: [\n      { value: '', label: 'All Programs' },\n      { value: 'CAMP', label: 'Holiday Camps' },\n      { value: 'BIRTHDAY', label: 'Birthday Parties' },\n      { value: 'IGNITE', label: 'Ignite Sessions' },\n    ],\n    locations: [\n      { value: '', label: 'All Locations' },\n      { value: '1', label: 'Neutral Bay' },\n      { value: '2', label: 'North Sydney' },\n    ],\n    statuses: [\n      { value: '', label: 'All Statuses' },\n      { value: 'PENDING', label: 'Pending' },\n      { value: 'CONFIRMED', label: 'Confirmed' },\n      { value: 'CANCELLED', label: 'Cancelled' },\n    ]\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"max-w-md w-full bg-white rounded-lg shadow-md p-6\">\n          <div className=\"text-center\">\n            <div className=\"text-red-600 text-lg font-medium mb-2\">Error Loading Calendar</div>\n            <p className=\"text-gray-600 mb-4\">{error}</p>\n            <button \n              onClick={() => refreshEvents()}\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\n            >\n              Retry\n            </button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-white shadow\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"py-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h1 className=\"text-3xl font-bold text-gray-900\">Admin Calendar</h1>\n                <p className=\"mt-2 text-gray-600\">\n                  Manage bookings, events, and capacity\n                </p>\n              </div>\n              <div className=\"flex items-center space-x-4\">\n                <button\n                  onClick={() => refreshEvents()}\n                  className=\"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2\"\n                >\n                  Refresh\n                </button>\n                <button className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\">\n                  Export Data\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Statistics Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n          <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n            <div className=\"p-5\">\n              <div className=\"flex items-center\">\n                <div className=\"flex-shrink-0\">\n                  <CalendarIcon className=\"h-6 w-6 text-gray-400\" />\n                </div>\n                <div className=\"ml-5 w-0 flex-1\">\n                  <dl>\n                    <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                      Total Events\n                    </dt>\n                    <dd className=\"text-lg font-medium text-gray-900\">\n                      {stats.totalEvents}\n                    </dd>\n                  </dl>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n            <div className=\"p-5\">\n              <div className=\"flex items-center\">\n                <div className=\"flex-shrink-0\">\n                  <UsersIcon className=\"h-6 w-6 text-gray-400\" />\n                </div>\n                <div className=\"ml-5 w-0 flex-1\">\n                  <dl>\n                    <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                      Bookings / Capacity\n                    </dt>\n                    <dd className=\"text-lg font-medium text-gray-900\">\n                      {stats.totalBookings} / {stats.totalCapacity}\n                    </dd>\n                  </dl>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n            <div className=\"p-5\">\n              <div className=\"flex items-center\">\n                <div className=\"flex-shrink-0\">\n                  <ChartBarIcon className=\"h-6 w-6 text-gray-400\" />\n                </div>\n                <div className=\"ml-5 w-0 flex-1\">\n                  <dl>\n                    <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                      Utilization Rate\n                    </dt>\n                    <dd className=\"text-lg font-medium text-gray-900\">\n                      {utilizationRate.toFixed(1)}%\n                    </dd>\n                  </dl>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n            <div className=\"p-5\">\n              <div className=\"flex items-center\">\n                <div className=\"flex-shrink-0\">\n                  <CurrencyDollarIcon className=\"h-6 w-6 text-gray-400\" />\n                </div>\n                <div className=\"ml-5 w-0 flex-1\">\n                  <dl>\n                    <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                      Total Revenue\n                    </dt>\n                    <dd className=\"text-lg font-medium text-gray-900\">\n                      ${stats.revenue.toLocaleString()}\n                    </dd>\n                  </dl>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Filters */}\n        <div className=\"bg-white rounded-lg shadow p-6 mb-6\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Filters</h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Program Type\n              </label>\n              <select\n                value={selectedFilters.productType}\n                onChange={(e) => setSelectedFilters(prev => ({ ...prev, productType: e.target.value }))}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n              >\n                {filterOptions.productTypes.map((option) => (\n                  <option key={option.value} value={option.value}>\n                    {option.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Location\n              </label>\n              <select\n                value={selectedFilters.locationId}\n                onChange={(e) => setSelectedFilters(prev => ({ ...prev, locationId: e.target.value }))}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n              >\n                {filterOptions.locations.map((option) => (\n                  <option key={option.value} value={option.value}>\n                    {option.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Status\n              </label>\n              <select\n                value={selectedFilters.status}\n                onChange={(e) => setSelectedFilters(prev => ({ ...prev, status: e.target.value }))}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n              >\n                {filterOptions.statuses.map((option) => (\n                  <option key={option.value} value={option.value}>\n                    {option.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n          </div>\n        </div>\n\n        {/* Calendar */}\n        {loading ? (\n          <div className=\"bg-white rounded-lg shadow p-8 text-center\">\n            <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n            <p className=\"mt-4 text-gray-600\">Loading calendar...</p>\n          </div>\n        ) : (\n          <AdminCalendar\n            events={adminEvents}\n            onEventUpdate={handleEventUpdate}\n            onEventCreate={handleEventCreate}\n            onEventDelete={handleEventDelete}\n          />\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AANA;;;;;;AAae,SAAS;IACtB,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;QACrD,aAAa;QACb,YAAY;QACZ,QAAQ;IACV;IAEA,MAAM,EAAE,WAAW,EAAE,YAAY,EAAE,GAAG,IAAA,mJAAoB;IAC1D,MAAM,YAAY,IAAA,gNAAO,EAAC,IAAM,gBAAgB;QAAC;KAAa;IAE9D,MAAM,EACJ,MAAM,EACN,OAAO,EACP,KAAK,EACL,WAAW,EACX,WAAW,EACX,WAAW,EACX,aAAa,EACd,GAAG,IAAA,0IAAW,EAAC,UAAU,KAAK,EAAE,UAAU,GAAG,EAAE;QAC9C,MAAM;QACN,aAAa,gBAAgB,WAAW;QACxC,YAAY,gBAAgB,UAAU;QACtC,aAAa;IACf;IAEA,MAAM,cAAc;IAEpB,+BAA+B;IAC/B,MAAM,QAAQ;QACZ,aAAa,YAAY,MAAM;QAC/B,eAAe,YAAY,MAAM,CAAC,CAAC,KAAK,QACtC,MAAM,CAAC,MAAM,aAAa,CAAC,eAAe,IAAI,CAAC,GAAG;QAEpD,eAAe,YAAY,MAAM,CAAC,CAAC,KAAK,QACtC,MAAM,CAAC,MAAM,aAAa,CAAC,QAAQ,IAAI,CAAC,GAAG;QAE7C,SAAS,YAAY,MAAM,CAAC,CAAC,KAAK,QAChC,MAAM,CAAC,MAAM,aAAa,CAAC,QAAQ,EAAE,OAAO,CAAC,YAAoB,UAC/D,aAAa,QAAQ,UAAU,EAAE,MAAM,CAAC,GAAG;IAEjD;IAEA,MAAM,kBAAkB,MAAM,aAAa,GAAG,IAC1C,AAAC,MAAM,aAAa,GAAG,MAAM,aAAa,GAAI,MAC9C;IAEJ,MAAM,oBAAoB,OAAO,SAAiB;QAChD,IAAI;YACF,MAAM,YAAY,SAAS;QAC3B,4BAA4B;QAC9B,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,0BAA0B;QAC5B;IACF;IAEA,MAAM,oBAAoB,OAAO;QAC/B,IAAI;YACF,MAAM,YAAY;QAClB,4BAA4B;QAC9B,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,0BAA0B;QAC5B;IACF;IAEA,MAAM,oBAAoB,OAAO;QAC/B,IAAI;YACF,MAAM,YAAY;QAClB,4BAA4B;QAC9B,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,0BAA0B;QAC5B;IACF;IAEA,MAAM,gBAAgB;QACpB,cAAc;YACZ;gBAAE,OAAO;gBAAI,OAAO;YAAe;YACnC;gBAAE,OAAO;gBAAQ,OAAO;YAAgB;YACxC;gBAAE,OAAO;gBAAY,OAAO;YAAmB;YAC/C;gBAAE,OAAO;gBAAU,OAAO;YAAkB;SAC7C;QACD,WAAW;YACT;gBAAE,OAAO;gBAAI,OAAO;YAAgB;YACpC;gBAAE,OAAO;gBAAK,OAAO;YAAc;YACnC;gBAAE,OAAO;gBAAK,OAAO;YAAe;SACrC;QACD,UAAU;YACR;gBAAE,OAAO;gBAAI,OAAO;YAAe;YACnC;gBAAE,OAAO;gBAAW,OAAO;YAAU;YACrC;gBAAE,OAAO;gBAAa,OAAO;YAAY;YACzC;gBAAE,OAAO;gBAAa,OAAO;YAAY;SAC1C;IACH;IAEA,IAAI,OAAO;QACT,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;sCAAwC;;;;;;sCACvD,8OAAC;4BAAE,WAAU;sCAAsB;;;;;;sCACnC,8OAAC;4BACC,SAAS,IAAM;4BACf,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;IAOX;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;;sDACC,8OAAC;4CAAG,WAAU;sDAAmC;;;;;;sDACjD,8OAAC;4CAAE,WAAU;sDAAqB;;;;;;;;;;;;8CAIpC,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CACC,SAAS,IAAM;4CACf,WAAU;sDACX;;;;;;sDAGD,8OAAC;4CAAO,WAAU;sDAAwI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BASpK,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC,uOAAY;oDAAC,WAAU;;;;;;;;;;;0DAE1B,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC;;sEACC,8OAAC;4DAAG,WAAU;sEAA6C;;;;;;sEAG3D,8OAAC;4DAAG,WAAU;sEACX,MAAM,WAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0CAQ9B,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC,8NAAS;oDAAC,WAAU;;;;;;;;;;;0DAEvB,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC;;sEACC,8OAAC;4DAAG,WAAU;sEAA6C;;;;;;sEAG3D,8OAAC;4DAAG,WAAU;;gEACX,MAAM,aAAa;gEAAC;gEAAI,MAAM,aAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0CAQxD,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC,uOAAY;oDAAC,WAAU;;;;;;;;;;;0DAE1B,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC;;sEACC,8OAAC;4DAAG,WAAU;sEAA6C;;;;;;sEAG3D,8OAAC;4DAAG,WAAU;;gEACX,gBAAgB,OAAO,CAAC;gEAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0CAQxC,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC,yPAAkB;oDAAC,WAAU;;;;;;;;;;;0DAEhC,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC;;sEACC,8OAAC;4DAAG,WAAU;sEAA6C;;;;;;sEAG3D,8OAAC;4DAAG,WAAU;;gEAAoC;gEAC9C,MAAM,OAAO,CAAC,cAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAU5C,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAAyC;;;;;;0CACvD,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;;0DACC,8OAAC;gDAAM,WAAU;0DAA+C;;;;;;0DAGhE,8OAAC;gDACC,OAAO,gBAAgB,WAAW;gDAClC,UAAU,CAAC,IAAM,mBAAmB,CAAA,OAAQ,CAAC;4DAAE,GAAG,IAAI;4DAAE,aAAa,EAAE,MAAM,CAAC,KAAK;wDAAC,CAAC;gDACrF,WAAU;0DAET,cAAc,YAAY,CAAC,GAAG,CAAC,CAAC,uBAC/B,8OAAC;wDAA0B,OAAO,OAAO,KAAK;kEAC3C,OAAO,KAAK;uDADF,OAAO,KAAK;;;;;;;;;;;;;;;;kDAO/B,8OAAC;;0DACC,8OAAC;gDAAM,WAAU;0DAA+C;;;;;;0DAGhE,8OAAC;gDACC,OAAO,gBAAgB,UAAU;gDACjC,UAAU,CAAC,IAAM,mBAAmB,CAAA,OAAQ,CAAC;4DAAE,GAAG,IAAI;4DAAE,YAAY,EAAE,MAAM,CAAC,KAAK;wDAAC,CAAC;gDACpF,WAAU;0DAET,cAAc,SAAS,CAAC,GAAG,CAAC,CAAC,uBAC5B,8OAAC;wDAA0B,OAAO,OAAO,KAAK;kEAC3C,OAAO,KAAK;uDADF,OAAO,KAAK;;;;;;;;;;;;;;;;kDAO/B,8OAAC;;0DACC,8OAAC;gDAAM,WAAU;0DAA+C;;;;;;0DAGhE,8OAAC;gDACC,OAAO,gBAAgB,MAAM;gDAC7B,UAAU,CAAC,IAAM,mBAAmB,CAAA,OAAQ,CAAC;4DAAE,GAAG,IAAI;4DAAE,QAAQ,EAAE,MAAM,CAAC,KAAK;wDAAC,CAAC;gDAChF,WAAU;0DAET,cAAc,QAAQ,CAAC,GAAG,CAAC,CAAC,uBAC3B,8OAAC;wDAA0B,OAAO,OAAO,KAAK;kEAC3C,OAAO,KAAK;uDADF,OAAO,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;oBAUlC,wBACC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC;gCAAE,WAAU;0CAAqB;;;;;;;;;;;6CAGpC,8OAAC,0JAAa;wBACZ,QAAQ;wBACR,eAAe;wBACf,eAAe;wBACf,eAAe;;;;;;;;;;;;;;;;;;AAM3B","debugId":null}}]
}