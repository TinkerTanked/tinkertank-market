{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/alien/Development/tinkertank/tinkertank-market/src/components/checkout/CheckoutForm.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport {\n  useStripe,\n  useElements,\n  PaymentElement,\n  AddressElement,\n} from '@stripe/react-stripe-js';\nimport { useEnhancedCartStore } from '@/stores/enhancedCartStore';\nimport { useRouter } from 'next/navigation';\nimport { z } from 'zod';\n\nconst CustomerInfoSchema = z.object({\n  name: z.string().min(1, 'Name is required'),\n  email: z.string().email('Valid email is required'),\n  phone: z.string().min(10, 'Valid phone number is required'),\n});\n\ntype CustomerInfo = z.infer<typeof CustomerInfoSchema>;\n\ninterface CheckoutFormProps {\n  onBack?: () => void\n}\n\nexport default function CheckoutForm({ onBack }: CheckoutFormProps) {\n  const stripe = useStripe();\n  const elements = useElements();\n  const { items, getSummary, clearCartAfterSuccess } = useEnhancedCartStore();\n  const router = useRouter();\n\n  const [customerInfo, setCustomerInfo] = useState<CustomerInfo>({\n    name: '',\n    email: '',\n    phone: '',\n  });\n  \n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [paymentIntent, setPaymentIntent] = useState<{\n    clientSecret: string;\n    orderId: string;\n    paymentIntentId: string;\n  } | null>(null);\n\n  const summary = getSummary();\n\n  const validateCustomerInfo = () => {\n    try {\n      CustomerInfoSchema.parse(customerInfo);\n      return true;\n    } catch (err) {\n      if (err instanceof z.ZodError) {\n        setError(err.issues[0].message);\n      }\n      return false;\n    }\n  };\n\n  const createPaymentIntent = async () => {\n    if (!validateCustomerInfo()) return false;\n\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch('/api/stripe/create-payment-intent', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          items: items.map(item => ({\n            id: item.id,\n            productId: item.product.id,\n            quantity: item.quantity,\n            totalPrice: item.totalPrice,\n            students: item.students,\n            selectedDate: item.selectedDate?.toISOString(),\n            selectedTimeSlot: item.selectedTimeSlot,\n            notes: item.notes,\n          })),\n          customerInfo: {\n            name: customerInfo.name,\n            email: customerInfo.email,\n            phone: customerInfo.phone,\n            address: {\n              line1: 'Address will be collected',\n              city: 'Sydney',\n              state: 'NSW',\n              postal_code: '2000',\n              country: 'AU',\n            },\n          },\n        }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to create payment intent');\n      }\n\n      setPaymentIntent(data);\n      return true;\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'An error occurred');\n      return false;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n\n    if (!stripe || !elements) {\n      setError('Stripe has not loaded yet. Please try again.');\n      return;\n    }\n\n    if (!paymentIntent) {\n      const created = await createPaymentIntent();\n      if (!created) return;\n      // Payment intent creation was successful, but we need to wait for the next render\n      // to have access to the PaymentElement\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const { error: submitError } = await elements.submit();\n      if (submitError) {\n        throw new Error(submitError.message);\n      }\n\n      const { error: confirmError, paymentIntent: confirmedPaymentIntent } = \n        await stripe.confirmPayment({\n          elements,\n          clientSecret: paymentIntent.clientSecret,\n          confirmParams: {\n            return_url: `${window.location.origin}/checkout/success?payment_intent=${paymentIntent.paymentIntentId}&order_id=${paymentIntent.orderId}`,\n          },\n          redirect: 'if_required',\n        });\n\n      if (confirmError) {\n        throw new Error(confirmError.message);\n      }\n\n      if (confirmedPaymentIntent?.status === 'succeeded') {\n        // Confirm payment on server\n        await fetch('/api/stripe/confirm-payment', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            paymentIntentId: paymentIntent.paymentIntentId,\n            orderId: paymentIntent.orderId,\n          }),\n        });\n\n        // Redirect to processing page (cart will be cleared there)\n        router.push(`/checkout/processing?payment_intent=${paymentIntent.paymentIntentId}&order_id=${paymentIntent.orderId}`);\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Payment failed');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\n      {/* Customer Information */}\n      <div className=\"space-y-4\">\n        <h3 className=\"text-lg font-medium text-gray-900\">Contact Information</h3>\n        \n        <div>\n          <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Full Name *\n          </label>\n          <input\n            type=\"text\"\n            id=\"name\"\n            value={customerInfo.name}\n            onChange={(e) => setCustomerInfo(prev => ({ ...prev, name: e.target.value }))}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n            required\n          />\n        </div>\n\n        <div>\n          <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Email Address *\n          </label>\n          <input\n            type=\"email\"\n            id=\"email\"\n            value={customerInfo.email}\n            onChange={(e) => setCustomerInfo(prev => ({ ...prev, email: e.target.value }))}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n            required\n          />\n        </div>\n\n        <div>\n          <label htmlFor=\"phone\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Phone Number *\n          </label>\n          <input\n            type=\"tel\"\n            id=\"phone\"\n            value={customerInfo.phone}\n            onChange={(e) => setCustomerInfo(prev => ({ ...prev, phone: e.target.value }))}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n            required\n          />\n        </div>\n      </div>\n\n      {/* Billing Address */}\n      {paymentIntent && (\n        <div className=\"space-y-4\">\n          <h3 className=\"text-lg font-medium text-gray-900\">Billing Address</h3>\n          <AddressElement \n            options={{\n              mode: 'billing',\n              fields: {\n                phone: 'always',\n              },\n              validation: {\n                phone: {\n                  required: 'always',\n                },\n              },\n            }}\n          />\n        </div>\n      )}\n\n      {/* Payment Element */}\n      {paymentIntent && (\n        <div className=\"space-y-4\">\n          <h3 className=\"text-lg font-medium text-gray-900\">Payment Method</h3>\n          <PaymentElement \n            options={{\n              layout: 'tabs',\n              fields: {\n                billingDetails: 'never', // We collect this separately\n              },\n            }}\n          />\n        </div>\n      )}\n\n      {/* Error Display */}\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 rounded-md p-4\">\n          <p className=\"text-red-800 text-sm\">{error}</p>\n        </div>\n      )}\n\n      {/* Order Summary */}\n      <div className=\"bg-gray-50 rounded-lg p-4\">\n        <div className=\"flex justify-between items-center text-lg font-semibold\">\n          <span>Total:</span>\n          <span>${summary.total.toFixed(2)} AUD</span>\n        </div>\n        <p className=\"text-sm text-gray-600 mt-1\">\n          Includes ${summary.tax.toFixed(2)} GST\n        </p>\n      </div>\n\n      {/* Action Buttons */}\n      <div className=\"flex gap-4\">\n        {onBack && (\n          <button\n            type=\"button\"\n            onClick={onBack}\n            className=\"flex-1 py-3 px-4 rounded-md font-medium border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors\"\n          >\n            Back\n          </button>\n        )}\n        <button\n          type=\"submit\"\n          disabled={!stripe || !elements || isLoading}\n          className={`${onBack ? 'flex-1' : 'w-full'} py-3 px-4 rounded-md font-medium transition-colors ${\n            isLoading\n              ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\n              : 'bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2'\n          }`}\n        >\n          {isLoading \n            ? (paymentIntent ? 'Processing Payment...' : 'Creating Order...') \n            : paymentIntent \n              ? `Pay $${summary.total.toFixed(2)} AUD`\n              : 'Continue to Payment'\n          }\n        </button>\n      </div>\n\n      {/* Security Notice */}\n      <div className=\"text-center\">\n        <p className=\"text-xs text-gray-500\">\n          ðŸ”’ Your payment information is secure and encrypted\n        </p>\n      </div>\n    </form>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 467, "column": 0}, "map": {"version":3,"sources":["file:///Users/alien/Development/tinkertank/tinkertank-market/src/components/checkout/StudentInfoForm.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { PlusIcon, TrashIcon, UserIcon, ArrowLeftIcon } from '@heroicons/react/24/outline'\nimport { useEnhancedCartStore } from '@/stores/enhancedCartStore'\nimport { generateId } from '@/utils/generateId'\nimport type { StudentDetails } from '@/types/enhancedCart'\n\ninterface StudentInfoFormProps {\n  onComplete: () => void\n  onBack: () => void\n}\n\nexport default function StudentInfoForm({ onComplete, onBack }: StudentInfoFormProps) {\n  const { items, addStudent, updateStudent, removeStudent, getValidation } = useEnhancedCartStore()\n  const [errors, setErrors] = useState<Record<string, string>>({})\n  \n  const validation = getValidation()\n\n  const addNewStudent = (itemId: string) => {\n    const newStudent: StudentDetails = {\n      id: generateId(),\n      firstName: '',\n      lastName: '',\n      age: 6,\n      parentName: '',\n      parentEmail: '',\n      parentPhone: '',\n      medicalNotes: '',\n      emergencyContact: {\n        name: '',\n        phone: '',\n        relationship: ''\n      },\n      allergies: []\n    }\n    addStudent(itemId, newStudent)\n  }\n\n  const validateAndProceed = () => {\n    const newErrors: Record<string, string> = {}\n    \n    items.forEach(item => {\n      if (item.product.category === 'camps' || item.product.category === 'birthdays') {\n        if (item.students.length < item.quantity) {\n          newErrors[`${item.id}-count`] = `${item.quantity - item.students.length} more student(s) required`\n        }\n        \n        item.students.forEach(student => {\n          if (!student.firstName.trim()) {\n            newErrors[`${student.id}-firstName`] = 'First name required'\n          }\n          if (!student.lastName.trim()) {\n            newErrors[`${student.id}-lastName`] = 'Last name required'\n          }\n          if (!student.parentName.trim()) {\n            newErrors[`${student.id}-parentName`] = 'Parent name required'\n          }\n          if (!student.parentEmail.trim()) {\n            newErrors[`${student.id}-parentEmail`] = 'Parent email required'\n          }\n          if (!student.parentPhone.trim()) {\n            newErrors[`${student.id}-parentPhone`] = 'Parent phone required'\n          }\n          if (student.age < 3 || student.age > 18) {\n            newErrors[`${student.id}-age`] = 'Age must be between 3 and 18'\n          }\n        })\n      }\n    })\n\n    setErrors(newErrors)\n    \n    if (Object.keys(newErrors).length === 0) {\n      onComplete()\n    }\n  }\n\n  return (\n    <div className='space-y-8'>\n      {/* Instructions */}\n      <div className='bg-blue-50 border border-blue-200 rounded-lg p-4'>\n        <p className='text-blue-800'>\n          Please provide student information for each participant. This helps us create the best possible experience for your child.\n        </p>\n      </div>\n\n      {/* Student Forms for each item */}\n      {items.map((item) => {\n        const needsStudentInfo = item.product.category === 'camps' || item.product.category === 'birthdays'\n        \n        if (!needsStudentInfo) return null\n\n        return (\n          <div key={item.id} className='border border-gray-200 rounded-xl p-6 space-y-6'>\n            <div className='flex items-center justify-between'>\n              <div className='flex items-center space-x-3'>\n                <div className='w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center'>\n                  <span className='text-xl'>\n                    {item.product.category === 'camps' && 'ðŸ”¬'}\n                    {item.product.category === 'birthdays' && 'ðŸŽ‰'}\n                  </span>\n                </div>\n                <div>\n                  <h3 className='font-display font-semibold text-lg text-gray-900'>\n                    {item.product.name}\n                  </h3>\n                  <p className='text-gray-600 text-sm'>\n                    {item.selectedDate?.toLocaleDateString()} â€¢ {item.selectedTimeSlot ? (typeof item.selectedTimeSlot === 'string' ? item.selectedTimeSlot : `${item.selectedTimeSlot.start} - ${item.selectedTimeSlot.end}`) : ''}\n                  </p>\n                </div>\n              </div>\n              <div className='text-right'>\n                <p className='text-sm text-gray-500'>\n                  {item.students.length} of {item.quantity} students added\n                </p>\n              </div>\n            </div>\n\n            {/* Error for missing students */}\n            {errors[`${item.id}-count`] && (\n              <div className='bg-red-50 border border-red-200 rounded-lg p-3'>\n                <p className='text-red-800 text-sm'>{errors[`${item.id}-count`]}</p>\n              </div>\n            )}\n\n            {/* Student Forms */}\n            <div className='space-y-6'>\n              {item.students.map((student, studentIndex) => (\n                <div key={student.id} className='bg-gray-50 rounded-lg p-4 space-y-4'>\n                  <div className='flex items-center justify-between'>\n                    <h4 className='font-medium text-gray-900 flex items-center'>\n                      <UserIcon className='w-4 h-4 mr-2' />\n                      Student {studentIndex + 1}\n                    </h4>\n                    <button\n                      onClick={() => removeStudent(item.id, student.id)}\n                      className='text-red-500 hover:text-red-700 transition-colors duration-200'\n                    >\n                      <TrashIcon className='w-4 h-4' />\n                    </button>\n                  </div>\n\n                  <div className='grid grid-cols-1 md:grid-cols-2 gap-4'>\n                    <div>\n                      <label className='block text-sm font-medium text-gray-700 mb-1'>\n                        First Name *\n                      </label>\n                      <input\n                        type='text'\n                        value={student.firstName}\n                        onChange={(e) => updateStudent(item.id, student.id, { firstName: e.target.value })}\n                        className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${\n                          errors[`${student.id}-firstName`] ? 'border-red-500' : 'border-gray-300'\n                        }`}\n                        placeholder='Enter first name'\n                      />\n                      {errors[`${student.id}-firstName`] && (\n                        <p className='text-red-500 text-xs mt-1'>{errors[`${student.id}-firstName`]}</p>\n                      )}\n                    </div>\n\n                    <div>\n                      <label className='block text-sm font-medium text-gray-700 mb-1'>\n                        Last Name *\n                      </label>\n                      <input\n                        type='text'\n                        value={student.lastName}\n                        onChange={(e) => updateStudent(item.id, student.id, { lastName: e.target.value })}\n                        className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${\n                          errors[`${student.id}-lastName`] ? 'border-red-500' : 'border-gray-300'\n                        }`}\n                        placeholder='Enter last name'\n                      />\n                      {errors[`${student.id}-lastName`] && (\n                        <p className='text-red-500 text-xs mt-1'>{errors[`${student.id}-lastName`]}</p>\n                      )}\n                    </div>\n\n                    <div>\n                      <label className='block text-sm font-medium text-gray-700 mb-1'>\n                        Age *\n                      </label>\n                      <input\n                        type='number'\n                        min='3'\n                        max='18'\n                        value={student.age}\n                        onChange={(e) => updateStudent(item.id, student.id, { age: parseInt(e.target.value) || 0 })}\n                        className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${\n                          errors[`${student.id}-age`] ? 'border-red-500' : 'border-gray-300'\n                        }`}\n                      />\n                      {errors[`${student.id}-age`] && (\n                        <p className='text-red-500 text-xs mt-1'>{errors[`${student.id}-age`]}</p>\n                      )}\n                    </div>\n\n                    <div>\n                      <label className='block text-sm font-medium text-gray-700 mb-1'>\n                        Parent/Guardian Name *\n                      </label>\n                      <input\n                        type='text'\n                        value={student.parentName}\n                        onChange={(e) => updateStudent(item.id, student.id, { parentName: e.target.value })}\n                        className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${\n                          errors[`${student.id}-parentName`] ? 'border-red-500' : 'border-gray-300'\n                        }`}\n                        placeholder='Enter parent name'\n                      />\n                      {errors[`${student.id}-parentName`] && (\n                        <p className='text-red-500 text-xs mt-1'>{errors[`${student.id}-parentName`]}</p>\n                      )}\n                    </div>\n\n                    <div>\n                      <label className='block text-sm font-medium text-gray-700 mb-1'>\n                        Parent Email *\n                      </label>\n                      <input\n                        type='email'\n                        value={student.parentEmail}\n                        onChange={(e) => updateStudent(item.id, student.id, { parentEmail: e.target.value })}\n                        className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${\n                          errors[`${student.id}-parentEmail`] ? 'border-red-500' : 'border-gray-300'\n                        }`}\n                        placeholder='Enter email address'\n                      />\n                      {errors[`${student.id}-parentEmail`] && (\n                        <p className='text-red-500 text-xs mt-1'>{errors[`${student.id}-parentEmail`]}</p>\n                      )}\n                    </div>\n\n                    <div>\n                      <label className='block text-sm font-medium text-gray-700 mb-1'>\n                        Parent Phone *\n                      </label>\n                      <input\n                        type='tel'\n                        value={student.parentPhone}\n                        onChange={(e) => updateStudent(item.id, student.id, { parentPhone: e.target.value })}\n                        className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${\n                          errors[`${student.id}-parentPhone`] ? 'border-red-500' : 'border-gray-300'\n                        }`}\n                        placeholder='Enter phone number'\n                      />\n                      {errors[`${student.id}-parentPhone`] && (\n                        <p className='text-red-500 text-xs mt-1'>{errors[`${student.id}-parentPhone`]}</p>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Optional Fields */}\n                  <div className='space-y-4'>\n                    <div>\n                      <label className='block text-sm font-medium text-gray-700 mb-1'>\n                        Medical Information (Optional)\n                      </label>\n                      <textarea\n                        value={student.medicalNotes || ''}\n                        onChange={(e) => updateStudent(item.id, student.id, { medicalNotes: e.target.value })}\n                        className='w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500'\n                        rows={2}\n                        placeholder='Any medical conditions we should know about'\n                      />\n                    </div>\n\n                    <div>\n                      <label className='block text-sm font-medium text-gray-700 mb-1'>\n                        Allergies (Optional)\n                      </label>\n                      <input\n                        type='text'\n                        value={student.allergies?.join(', ') || ''}\n                        onChange={(e) => updateStudent(item.id, student.id, { allergies: e.target.value.split(',').map(s => s.trim()).filter(Boolean) })}\n                        className='w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500'\n                        placeholder='Any allergies or dietary restrictions'\n                      />\n                    </div>\n                  </div>\n                </div>\n              ))}\n\n              {/* Add Student Button */}\n              {item.students.length < item.quantity && (\n                <button\n                  onClick={() => addNewStudent(item.id)}\n                  className='w-full border-2 border-dashed border-gray-300 rounded-lg p-4 text-gray-500 hover:border-primary-400 hover:text-primary-600 transition-all duration-200 flex items-center justify-center space-x-2'\n                >\n                  <PlusIcon className='w-5 h-5' />\n                  <span>Add Student {item.students.length + 1}</span>\n                </button>\n              )}\n            </div>\n          </div>\n        )\n      })}\n\n      {/* Validation Errors */}\n      {validation.errors.length > 0 && (\n        <div className='bg-red-50 border border-red-200 rounded-lg p-4'>\n          <h4 className='font-medium text-red-900 mb-2'>Please fix the following issues:</h4>\n          <ul className='space-y-1'>\n            {validation.errors.map((error, index) => (\n              <li key={index} className='text-red-800 text-sm'>\n                â€¢ {error.message}\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n\n      {/* Navigation */}\n      <div className='flex items-center justify-between pt-6 border-t border-gray-200'>\n        <button\n          onClick={onBack}\n          className='btn-outline flex items-center'\n        >\n          <ArrowLeftIcon className='w-4 h-4 mr-2' />\n          Back to Review\n        </button>\n        \n        <button\n          onClick={validateAndProceed}\n          disabled={!validation.isValid}\n          className={`btn-primary text-lg px-8 py-4 ${\n            !validation.isValid ? 'opacity-50 cursor-not-allowed' : ''\n          }`}\n        >\n          Continue to Payment\n        </button>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1141, "column": 0}, "map": {"version":3,"sources":["file:///Users/alien/Development/tinkertank/tinkertank-market/src/components/checkout/OrderSummary.tsx"],"sourcesContent":["'use client'\n\nimport { useEnhancedCartStore } from '@/stores/enhancedCartStore'\n\nexport default function OrderSummary() {\n  const { items, getSummary } = useEnhancedCartStore()\n  const { subtotal, tax, total, itemCount } = getSummary()\n\n  const formatPrice = (price: number) => {\n    return new Intl.NumberFormat('en-AU', {\n      style: 'currency',\n      currency: 'AUD',\n      minimumFractionDigits: 2,\n    }).format(price)\n  }\n\n  return (\n    <div className='space-y-6'>\n      <h2 className='text-xl font-display font-bold text-gray-900'>\n        Order Summary\n      </h2>\n\n      {/* Items */}\n      <div className='space-y-4'>\n        {items.map((item) => (\n          <div key={item.id} className='flex items-start justify-between'>\n            <div className='flex-1'>\n              <h3 className='font-medium text-gray-900'>{item.product.name}</h3>\n              <p className='text-sm text-gray-600'>Qty: {item.quantity}</p>\n              {item.selectedDate && (\n                <p className='text-xs text-gray-500'>\n                  {item.selectedDate.toLocaleDateString()} â€¢ {item.selectedTimeSlot ? (typeof item.selectedTimeSlot === 'string' ? item.selectedTimeSlot : `${item.selectedTimeSlot.start} - ${item.selectedTimeSlot.end}`) : ''}\n                </p>\n              )}\n            </div>\n            <span className='font-medium text-gray-900'>\n              {formatPrice(item.totalPrice)}\n            </span>\n          </div>\n        ))}\n      </div>\n\n      {/* Totals */}\n      <div className='border-t border-gray-200 pt-4 space-y-2'>\n        <div className='flex justify-between text-gray-700'>\n          <span>Subtotal ({itemCount} {itemCount === 1 ? 'item' : 'items'})</span>\n          <span>{formatPrice(subtotal)}</span>\n        </div>\n        \n        <div className='flex justify-between text-gray-700'>\n          <span>GST (10%)</span>\n          <span>{formatPrice(tax)}</span>\n        </div>\n        \n        <div className='flex justify-between text-lg font-bold text-gray-900 pt-2 border-t border-gray-200'>\n          <span>Total</span>\n          <span>{formatPrice(total)}</span>\n        </div>\n      </div>\n\n      {/* Trust Indicators */}\n      <div className='pt-6 border-t border-gray-200 space-y-3'>\n        <div className='flex items-center space-x-2 text-sm text-gray-600'>\n          <span className='text-green-500'>âœ“</span>\n          <span>Secure payment processing</span>\n        </div>\n        <div className='flex items-center space-x-2 text-sm text-gray-600'>\n          <span className='text-green-500'>âœ“</span>\n          <span>48-hour cancellation policy</span>\n        </div>\n        <div className='flex items-center space-x-2 text-sm text-gray-600'>\n          <span className='text-green-500'>âœ“</span>\n          <span>100% satisfaction guarantee</span>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS;IACtB,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,GAAG,IAAA,0JAAoB;IAClD,MAAM,EAAE,QAAQ,EAAE,GAAG,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG;IAE5C,MAAM,cAAc,CAAC;QACnB,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;YACpC,OAAO;YACP,UAAU;YACV,uBAAuB;QACzB,GAAG,MAAM,CAAC;IACZ;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAA+C;;;;;;0BAK7D,8OAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC,qBACV,8OAAC;wBAAkB,WAAU;;0CAC3B,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAG,WAAU;kDAA6B,KAAK,OAAO,CAAC,IAAI;;;;;;kDAC5D,8OAAC;wCAAE,WAAU;;4CAAwB;4CAAM,KAAK,QAAQ;;;;;;;oCACvD,KAAK,YAAY,kBAChB,8OAAC;wCAAE,WAAU;;4CACV,KAAK,YAAY,CAAC,kBAAkB;4CAAG;4CAAI,KAAK,gBAAgB,GAAI,OAAO,KAAK,gBAAgB,KAAK,WAAW,KAAK,gBAAgB,GAAG,GAAG,KAAK,gBAAgB,CAAC,KAAK,CAAC,GAAG,EAAE,KAAK,gBAAgB,CAAC,GAAG,EAAE,GAAI;;;;;;;;;;;;;0CAIlN,8OAAC;gCAAK,WAAU;0CACb,YAAY,KAAK,UAAU;;;;;;;uBAXtB,KAAK,EAAE;;;;;;;;;;0BAkBrB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;oCAAK;oCAAW;oCAAU;oCAAE,cAAc,IAAI,SAAS;oCAAQ;;;;;;;0CAChE,8OAAC;0CAAM,YAAY;;;;;;;;;;;;kCAGrB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;0CAAK;;;;;;0CACN,8OAAC;0CAAM,YAAY;;;;;;;;;;;;kCAGrB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;0CAAK;;;;;;0CACN,8OAAC;0CAAM,YAAY;;;;;;;;;;;;;;;;;;0BAKvB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAK,WAAU;0CAAiB;;;;;;0CACjC,8OAAC;0CAAK;;;;;;;;;;;;kCAER,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAK,WAAU;0CAAiB;;;;;;0CACjC,8OAAC;0CAAK;;;;;;;;;;;;kCAER,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAK,WAAU;0CAAiB;;;;;;0CACjC,8OAAC;0CAAK;;;;;;;;;;;;;;;;;;;;;;;;AAKhB","debugId":null}},
    {"offset": {"line": 1411, "column": 0}, "map": {"version":3,"sources":["file:///Users/alien/Development/tinkertank/tinkertank-market/src/app/checkout/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport Link from 'next/link'\nimport { Elements } from '@stripe/react-stripe-js'\nimport { loadStripe } from '@stripe/stripe-js'\nimport { \n  ShoppingCartIcon,\n  UserIcon,\n  CreditCardIcon,\n  CheckIcon,\n  ArrowLeftIcon\n} from '@heroicons/react/24/outline'\nimport { useEnhancedCartStore } from '@/stores/enhancedCartStore'\nimport CheckoutForm from '@/components/checkout/CheckoutForm'\nimport StudentInfoForm from '@/components/checkout/StudentInfoForm'\nimport OrderSummary from '@/components/checkout/OrderSummary'\n\nconst stripePromise = loadStripe(process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY!)\n\nenum CheckoutStep {\n  REVIEW = 'review',\n  STUDENTS = 'students',\n  PAYMENT = 'payment'\n}\n\nexport default function CheckoutPage() {\n  const { items, getSummary, getValidation } = useEnhancedCartStore()\n  const router = useRouter()\n  const [currentStep, setCurrentStep] = useState<CheckoutStep>(CheckoutStep.REVIEW)\n  const summary = getSummary()\n  const validation = getValidation()\n\n  useEffect(() => {\n    if (items.length === 0) {\n      router.push('/camps')\n    }\n  }, [items.length, router])\n\n  if (items.length === 0) {\n    return (\n      <div className='py-20'>\n        <div className='container-custom text-center'>\n          <div className='w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6'>\n            <ShoppingCartIcon className='w-12 h-12 text-gray-400' />\n          </div>\n          <h1 className='text-2xl font-bold text-gray-900 mb-4'>Your cart is empty</h1>\n          <p className='text-gray-600 mb-8'>Add some amazing STEM experiences to get started!</p>\n          <Link href='/camps' className='btn-primary'>\n            Browse Programs\n          </Link>\n        </div>\n      </div>\n    )\n  }\n\n  const formatPrice = (price: number) => {\n    return new Intl.NumberFormat('en-AU', {\n      style: 'currency',\n      currency: 'AUD',\n      minimumFractionDigits: 2,\n    }).format(price)\n  }\n\n  const steps = [\n    { id: CheckoutStep.REVIEW, name: 'Review', icon: ShoppingCartIcon },\n    { id: CheckoutStep.STUDENTS, name: 'Students', icon: UserIcon },\n    { id: CheckoutStep.PAYMENT, name: 'Payment', icon: CreditCardIcon }\n  ]\n\n  const canProceedToStudents = currentStep === CheckoutStep.REVIEW\n  const canProceedToPayment = currentStep === CheckoutStep.STUDENTS && validation.isValid\n  const isCurrentStep = (step: CheckoutStep) => currentStep === step\n  const isCompletedStep = (step: CheckoutStep) => {\n    if (step === CheckoutStep.REVIEW) return currentStep !== CheckoutStep.REVIEW\n    if (step === CheckoutStep.STUDENTS) return currentStep === CheckoutStep.PAYMENT\n    return false\n  }\n\n  return (\n    <div className='py-12 bg-gray-50 min-h-screen'>\n      <div className='container-custom max-w-6xl'>\n        {/* Progress Indicator */}\n        <div className='mb-12'>\n          <div className='flex items-center justify-center space-x-4 md:space-x-8'>\n            {steps.map((step, index) => {\n              const Icon = step.icon\n              return (\n                <div key={step.id} className='flex items-center'>\n                  <div className={`flex items-center space-x-3 ${\n                    isCurrentStep(step.id) \n                      ? 'text-primary-600' \n                      : isCompletedStep(step.id)\n                      ? 'text-green-600'\n                      : 'text-gray-400'\n                  }`}>\n                    <div className={`w-10 h-10 rounded-full flex items-center justify-center border-2 ${\n                      isCurrentStep(step.id)\n                        ? 'border-primary-600 bg-primary-50'\n                        : isCompletedStep(step.id)\n                        ? 'border-green-600 bg-green-50'\n                        : 'border-gray-300 bg-white'\n                    }`}>\n                      {isCompletedStep(step.id) ? (\n                        <CheckIcon className='w-5 h-5' />\n                      ) : (\n                        <Icon className='w-5 h-5' />\n                      )}\n                    </div>\n                    <span className='hidden md:block font-medium'>{step.name}</span>\n                  </div>\n                  {index < steps.length - 1 && (\n                    <div className={`w-8 h-0.5 mx-4 ${\n                      isCompletedStep(steps[index + 1].id) ? 'bg-green-600' : 'bg-gray-300'\n                    }`} />\n                  )}\n                </div>\n              )\n            })}\n          </div>\n        </div>\n\n        <div className='grid lg:grid-cols-3 gap-12'>\n          {/* Main Content */}\n          <div className='lg:col-span-2 space-y-8'>\n            {/* Step Content */}\n            {currentStep === CheckoutStep.REVIEW && (\n              <div className='bg-white rounded-xl shadow-lg p-8'>\n                <div className='flex items-center justify-between mb-6'>\n                  <h2 className='text-2xl font-display font-bold text-gray-900'>\n                    Review Your Order\n                  </h2>\n                  <Link href='/cart' className='text-primary-600 hover:text-primary-700 flex items-center'>\n                    <ArrowLeftIcon className='w-4 h-4 mr-1' />\n                    Edit Cart\n                  </Link>\n                </div>\n\n                <div className='space-y-6'>\n                  {items.map((item) => (\n                    <div key={item.id} className='flex items-start space-x-4 p-4 border border-gray-200 rounded-lg'>\n                      <div className='w-16 h-16 bg-gradient-to-br from-primary-100 to-accent-100 rounded-lg flex items-center justify-center flex-shrink-0'>\n                        <span className='text-2xl'>\n                          {item.product.category === 'camps' && 'ðŸ”¬'}\n                          {item.product.category === 'birthdays' && 'ðŸŽ‰'}\n                          {item.product.category === 'subscriptions' && 'ðŸš€'}\n                        </span>\n                      </div>\n                      <div className='flex-1'>\n                        <h3 className='font-display font-semibold text-lg text-gray-900'>\n                          {item.product.name}\n                        </h3>\n                        <p className='text-gray-600'>{item.product.shortDescription}</p>\n                        {item.selectedDate && (\n                          <div className='flex items-center space-x-4 mt-2 text-sm text-gray-500'>\n                            <span>ðŸ“… {item.selectedDate.toLocaleDateString()}</span>\n                            {item.selectedTimeSlot && <span>ðŸ•’ {typeof item.selectedTimeSlot === 'string' ? item.selectedTimeSlot : `${item.selectedTimeSlot.start} - ${item.selectedTimeSlot.end}`}</span>}\n                          </div>\n                        )}\n                        <div className='flex items-center justify-between mt-3'>\n                          <span className='text-gray-700'>Quantity: {item.quantity}</span>\n                          <span className='font-bold text-lg'>{formatPrice(item.totalPrice)}</span>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n\n                <div className='mt-8 flex justify-end'>\n                  <button\n                    onClick={() => setCurrentStep(CheckoutStep.STUDENTS)}\n                    disabled={!canProceedToStudents}\n                    className='btn-primary text-lg px-8 py-4'\n                  >\n                    Continue to Student Info\n                  </button>\n                </div>\n              </div>\n            )}\n\n            {currentStep === CheckoutStep.STUDENTS && (\n              <div className='bg-white rounded-xl shadow-lg p-8'>\n                <h2 className='text-2xl font-display font-bold text-gray-900 mb-6'>\n                  Student Information\n                </h2>\n                <StudentInfoForm\n                  onComplete={() => setCurrentStep(CheckoutStep.PAYMENT)}\n                  onBack={() => setCurrentStep(CheckoutStep.REVIEW)}\n                />\n              </div>\n            )}\n\n            {currentStep === CheckoutStep.PAYMENT && (\n              <div className='bg-white rounded-xl shadow-lg p-8'>\n                <h2 className='text-2xl font-display font-bold text-gray-900 mb-6'>\n                  Payment Details\n                </h2>\n                <Elements stripe={stripePromise}>\n                  <CheckoutForm onBack={() => setCurrentStep(CheckoutStep.STUDENTS)} />\n                </Elements>\n              </div>\n            )}\n          </div>\n\n          {/* Order Summary Sidebar */}\n          <div className='lg:col-span-1'>\n            <div className='bg-white rounded-xl shadow-lg p-6 sticky top-24'>\n              <OrderSummary />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}